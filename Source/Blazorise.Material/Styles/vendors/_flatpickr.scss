.flatpickr-calendar {
    --mui-picker-bg: var(--mui-surface-container-lowest);
    --mui-picker-bg-muted: var(--mui-surface-container-low);
    --mui-picker-color: var(--mui-on-surface);
    --mui-picker-color-muted: color-mix(in srgb, var(--mui-on-surface) 62%, transparent);
    --mui-picker-border: var(--mui-outline-variant);
    --mui-picker-hover: color-mix(in srgb, var(--mui-on-surface) 8%, transparent);
    --mui-picker-selected-bg: var(--mui-primary);
    --mui-picker-selected-color: var(--mui-on-primary);
    --mui-picker-selected-hover: var(--mui-primary-hover);
    --mui-picker-range-bg: color-mix(in srgb, var(--mui-primary) 16%, transparent);
    --mui-picker-today-border: var(--mui-outline);
    z-index: var(--mui-zindex-popover);
    border: 0.0625rem solid var(--mui-picker-border);
    border-radius: 1rem;
    background-color: var(--mui-picker-bg);
    color: var(--mui-picker-color);
    box-shadow: var(--mui-elevate2);
    overflow: hidden;
    font-family: var(--mui-font-family);
    font-size: 0.875rem;
}

.flatpickr-calendar:before,
.flatpickr-calendar:after {
    display: none;
}

.flatpickr-months {
    padding: 0.5rem 0.5rem 0;

    .flatpickr-month,
    .flatpickr-prev-month,
    .flatpickr-next-month {
        color: inherit;
        fill: currentColor;
    }

    .flatpickr-month {
        background: transparent;
        block-size: 2rem;
    }

    .flatpickr-prev-month,
    .flatpickr-next-month {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        block-size: 2rem;
        inline-size: 2rem;
        padding: 0;
        margin: 0.125rem;
        border-radius: 999rem;
        transition: background-color var(--mui-duration-normal), color var(--mui-duration-normal);

        &:hover {
            background-color: var(--mui-picker-hover);
            color: inherit;
        }

        &.flatpickr-disabled {
            opacity: 0.38;
        }

        svg {
            inline-size: 0.75rem;
            block-size: 0.75rem;

            path {
                fill: currentColor;
            }
        }
    }
}

.flatpickr-current-month {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    block-size: 2rem;
    padding: 0;
    color: inherit;
    font-size: 1rem;
    line-height: 1.25rem;
    font-weight: 500;

    span.cur-month {
        font-weight: 600;
    }

    .flatpickr-monthDropdown-months,
    .numInputWrapper,
    input.cur-year {
        color: inherit;
        font-size: inherit;
        font-weight: inherit;
    }

    .flatpickr-monthDropdown-months {
        border: 0;
        outline: 0;
        background: transparent;
        appearance: none;
        cursor: pointer;
        border-radius: 0.5rem;
        transition: background-color var(--mui-duration-normal);

        &:hover,
        &:focus {
            background-color: var(--mui-picker-hover);
        }
    }

    .numInputWrapper {
        inline-size: auto;
        min-inline-size: 3ch;
        border-radius: 0.5rem;
        transition: background-color var(--mui-duration-normal);

        &:hover,
        &:focus-within {
            background-color: var(--mui-picker-hover);
        }

        span.arrowUp,
        span.arrowDown {
            display: none;
        }
    }

    input.cur-year {
        border: 0;
        border-radius: 0;
        background: transparent;
    }
}

.flatpickr-weekdays {
    padding: 0 0.5rem;
}

span.flatpickr-weekday {
    color: var(--mui-picker-color-muted);
    font-size: 0.8125rem;
    font-weight: 600;
    line-height: 2rem;
}

.flatpickr-days {
    padding: 0 0.5rem 0.5rem;
}

.flatpickr-day {
    border: 0.0625rem solid transparent;
    border-radius: 999rem;
    color: var(--mui-picker-color);
    font-size: 0.9375rem;
    font-weight: 500;
    transition: background-color var(--mui-duration-normal), border-color var(--mui-duration-normal), color var(--mui-duration-normal);

    &.today {
        border-color: var(--mui-picker-today-border);
    }

    &:hover,
    &:focus {
        background-color: var(--mui-picker-hover);
        border-color: transparent;
    }

    &.selected,
    &.startRange,
    &.endRange,
    &.selected.inRange,
    &.startRange.inRange,
    &.endRange.inRange,
    &.selected:focus,
    &.startRange:focus,
    &.endRange:focus,
    &.selected:hover,
    &.startRange:hover,
    &.endRange:hover,
    &.selected.prevMonthDay,
    &.startRange.prevMonthDay,
    &.endRange.prevMonthDay,
    &.selected.nextMonthDay,
    &.startRange.nextMonthDay,
    &.endRange.nextMonthDay {
        background: var(--mui-picker-selected-bg);
        border-color: var(--mui-picker-selected-bg);
        color: var(--mui-picker-selected-color);
    }

    &.selected:hover,
    &.startRange:hover,
    &.endRange:hover {
        background: var(--mui-picker-selected-hover);
        border-color: var(--mui-picker-selected-hover);
    }

    &.inRange,
    &.prevMonthDay.inRange,
    &.nextMonthDay.inRange,
    &.today.inRange {
        border-radius: 0;
        background: var(--mui-picker-range-bg);
        border-color: var(--mui-picker-range-bg);
        color: var(--mui-picker-color);
        box-shadow: none;
    }

    &.selected.startRange + .endRange:not(:nth-child(7n + 1)),
    &.startRange.startRange + .endRange:not(:nth-child(7n + 1)),
    &.endRange.startRange + .endRange:not(:nth-child(7n + 1)) {
        box-shadow: -0.625rem 0 0 var(--mui-picker-range-bg);
    }

    &.selected.startRange,
    &.startRange.startRange,
    &.endRange.startRange,
    &.selected.endRange,
    &.startRange.endRange,
    &.endRange.endRange {
        border-radius: 999rem;
    }

    &.prevMonthDay,
    &.nextMonthDay {
        color: color-mix(in srgb, var(--mui-picker-color) 42%, transparent);
    }

    &.flatpickr-disabled,
    &.flatpickr-disabled:hover,
    &.notAllowed,
    &.notAllowed.prevMonthDay,
    &.notAllowed.nextMonthDay {
        color: color-mix(in srgb, var(--mui-picker-color) 30%, transparent);
        opacity: 1;
    }
}

.flatpickr-time {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.125rem;
    border-top: 0.0625rem solid var(--mui-picker-border);
    background-color: var(--mui-picker-bg-muted);
    block-size: 3rem;
    padding: 0.25rem 0.5rem;

    &:after {
        display: none;
    }

    .numInputWrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        inline-size: 3.25rem;
        block-size: 2.25rem;
        border-radius: 0.75rem;
        background: transparent;
        transition: background-color var(--mui-duration-normal);

        &:hover,
        &:focus-within {
            background-color: var(--mui-picker-hover);
        }

        span.arrowUp,
        span.arrowDown {
            display: none;
        }
    }

    input,
    .flatpickr-am-pm,
    .flatpickr-time-separator {
        color: var(--mui-picker-color);
        font-size: 1rem;
        font-weight: 600;
        line-height: 1;
    }

    input {
        border: 0;
        background: transparent;
    }

    .flatpickr-time-separator {
        inline-size: 0.75rem;
        text-align: center;
    }

    .flatpickr-am-pm {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        inline-size: 3.25rem;
        block-size: 2.25rem;
        margin-inline-start: 0.125rem;
        border-radius: 0.75rem;
        transition: background-color var(--mui-duration-normal);
        cursor: pointer;

        &:hover,
        &:focus {
            background-color: var(--mui-picker-hover);
        }
    }
}

.flatpickr-calendar.noCalendar.hasTime {
    inline-size: auto;
    min-inline-size: 17.5rem;
    max-inline-size: 22rem;
    padding: 0.5rem;
    border-radius: 0.75rem;

    .flatpickr-time {
        border-top: 0;
        border-radius: 0.5rem;
        background-color: var(--mui-picker-bg-muted);
    }
}

.flatpickr-monthSelect-month {
    border-radius: 0.75rem;

    &:hover,
    &:focus {
        background-color: var(--mui-picker-hover);
    }

    &.selected {
        background-color: var(--mui-primary-container);
        color: var(--mui-on-primary-container);
    }
}

.flatpickr-footer-buttons {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    border-top: 0.0625rem solid var(--mui-picker-border);
    padding: 0.5rem 0.5rem 0.625rem;
    background-color: var(--mui-picker-bg);
}

.flatpickr-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-block-size: 2rem;
    padding: 0 0.75rem;
    border: 0;
    border-radius: 999rem;
    background: transparent;
    color: var(--mui-primary);
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1;
    transition: background-color var(--mui-duration-normal), color var(--mui-duration-normal);
    cursor: pointer;

    &:hover,
    &:focus {
        background-color: color-mix(in srgb, var(--mui-primary) 12%, transparent);
    }
}

.flatpickr-footer-buttons .flatpickr-button:last-child {
    margin-inline-start: auto;
}
