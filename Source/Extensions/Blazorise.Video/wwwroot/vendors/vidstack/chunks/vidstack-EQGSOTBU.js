import{c as dt,u as F,V as Y,e as h,s as v,E as I,p as d,l as Q,i as w,a as X,b as Ot,S as St,f as $t,t as pt,d as Ys,D as O,w as Xs,o as T,g as Ft,h as Oe,j as Js,k as Zs,m as ae,n as Fe,q as ti,r as m,v as mt,x as ei,y as si,z as ii,A as ai,B as Nt,C as ni,F as ot,G as Lt,H as Ne,I as x,J as P,K as V,L as st,M as vt,N as ri,O as oi,P as ft,Q as A,R as He,T as E,U as Ht,W as li,X as Be,Y as hi,Z as ui,_ as Ge,$ as ci,a0 as Ke,a1 as Bt,a2 as b,a3 as di,a4 as Ue,a5 as J,a6 as pi,a7 as mi,a8 as xt,a9 as ne,aa as fi,ab as gi,ac as yi,ad as bi}from"./vidstack-tM4_Pyef.js";import{c as Qe,I as We,a as wi,b as $i,d as vi,e as Ti,i as ki,f as Pi,g as Si,h as je,j as xi,k as re,l as ze,m as oe}from"./vidstack-DYRCRpQk.js";import{T as Gt,g as Ye,a as Tt,u as Ei}from"./vidstack-vRHGgRMH.js";import{i as H,T as N,a as Kt,w as Ci}from"./vidstack-D3qRdT6k.js";import{L as k}from"./vidstack-C_AxqLKV.js";import{Q as Z}from"./vidstack-DRH_1tFW.js";import{c as le,a as lt}from"./vidstack-BfBBPhXV.js";import{p as qt,g as Ut,a as Ai,b as Mi}from"./vidstack-Bgp5gYUL.js";import{c as he,r as W,g as Li}from"./vidstack-Bxv1Qnxe.js";const ue=Symbol(0),qi=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],ce=dt();function $(){return F(ce)}function Xe(a){return a instanceof HTMLAudioElement}function Je(a){return a instanceof HTMLVideoElement}function _i(a){return Xe(a)||Je(a)}function Ii(a){return a instanceof HTMLIFrameElement}class kt extends Y{}const Ze={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Qt=new Set(["Shift","Alt","Meta","Ctrl"]),Di='button, [role="button"]',ts='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class Vi extends kt{#t;constructor(t){super(),this.#t=t}onConnect(){h(this.#e.bind(this))}#e(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s=e()==="player"?this.el:document,i=v(!1);s===this.el?new I(this.el).add("focusin",()=>i.set(!0)).add("focusout",n=>{this.el.contains(n.target)||i.set(!1)}):(d(i)||i.set(document.querySelector("[data-media-player]")===this.el),Q(document,"focusin",n=>{const r=n.composedPath().find(o=>o instanceof Element&&o.localName==="media-player");r!==void 0&&i.set(this.el===r)})),h(()=>{i()&&new I(s).add("keyup",this.#s.bind(this)).add("keydown",this.#i.bind(this)).add("keydown",this.#a.bind(this),{capture:!0})})}#s(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(ts))return;let{method:s,value:i}=this.#n(t);if(!w(i)&&!X(i)){i?.onKeyUp?.({event:t,player:this.#t.player,remote:this.#t.remote}),i?.callback?.(t,this.#t.remote);return}s?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.#l?(this.#u(t,s==="seekForward"),this.#l=null):(this.#t.remote.seek(this.#r,t),this.#r=void 0)),s?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}#i(t){if(!t.key||Qt.has(t.key))return;const e=document.activeElement;if(e?.matches(ts)||Ot(t)&&e?.matches(Di))return;let{method:s,value:i}=this.#n(t),n=!t.metaKey&&/^[0-9]$/.test(t.key);if(!w(i)&&!X(i)&&!n){i?.onKeyDown?.({event:t,player:this.#t.player,remote:this.#t.remote}),i?.callback?.(t,this.#t.remote);return}if(!s&&n){t.preventDefault(),t.stopPropagation(),this.#t.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(s){switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.#d(t,s,s==="seekForward");break;case"volumeUp":case"volumeDown":const r=this.el.querySelector("[data-media-volume-slider]");if(r)r.dispatchEvent(new KeyboardEvent("keydown",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const l=t.shiftKey?.1:.05;this.#t.remote.changeVolume(this.$state.volume()+(s==="volumeUp"?+l:-l),t)}break;case"toggleFullscreen":this.#t.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const o=this.$state.playbackRate();this.#t.remote.changePlaybackRate(Math.max(.25,Math.min(2,o+(s==="speedUp"?.25:-.25))),t);break;default:this.#t.remote[s]?.(t)}this.$state.lastKeyboardAction.set({action:s,event:t})}}#a(t){_i(t.target)&&this.#n(t).method&&t.preventDefault()}#n(t){const e={...this.$props.keyShortcuts(),...this.#t.ariaKeys},s=Object.keys(e).find(i=>{const n=e[i],r=X(n)?n.join(" "):w(n)?n:n?.keys;return(X(r)?r:r?.split(" "))?.map(l=>Oi(l).replace(/Control/g,"Ctrl").split("+"))?.some(l=>{const u=new Set(l.filter(c=>Qt.has(c)));for(const c of Qt){const p=c.toLowerCase()+"Key";if(!u.has(c)&&t[p])return!1}return l.every(c=>Qt.has(c)?t[c.toLowerCase()+"Key"]:t.key===c.replace("Space"," "))})});return{method:s,value:s?e[s]:null}}#r;#o(t,e){const s=t.shiftKey?10:5;return this.#r=Math.max(0,Math.min((this.#r??this.$state.currentTime())+(e==="seekForward"?+s:-s),this.$state.duration()))}#l=null;#u(t,e){this.#l?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}#d(t,e,s){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#u(t,s):this.#t.remote.seeking(this.#o(t,e),t))}}const Ri=["!","@","#","$","%","^","&","*","(",")"];function Oi(a){return a.replace(/Shift\+(\d)/g,(t,e)=>Ri[e-1])}const Fi={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:Ze,storage:null},Wt=new St({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new Gt,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:Qe(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return We&&this.mediaType==="video"&&(!this.playsInline||!$t.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new Gt,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new Gt,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(H).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get duration(){return this.seekableWindow},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const a=Ye(this.buffered)??0;return Math.max(a,this.clipStartTime)},get bufferedEnd(){const a=Tt(this.buffered)??0;return Math.min(this.seekableEnd,Math.max(0,a-this.clipStartTime))},get bufferedWindow(){return Math.max(0,this.bufferedEnd-this.bufferedStart)},get seekableStart(){if(this.isLiveDVR&&this.liveDVRWindow>0)return Math.max(0,this.seekableEnd-this.liveDVRWindow);const a=Ye(this.seekable)??0;return Math.max(a,this.clipStartTime)},get seekableEnd(){if(this.providedDuration>0)return this.providedDuration;const a=this.liveSyncPosition>0?this.liveSyncPosition:this.canPlay?Tt(this.seekable)??1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,a):a},get seekableWindow(){const a=this.seekableEnd-this.seekableStart;return isNaN(a)?1/0:Math.max(0,a)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.duration)&&(!this.isLiveDVR||this.duration>=this.liveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,this.seekableEnd-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},get isLiveDVR(){return/:dvr/.test(this.streamType)},get liveDVRWindow(){return Math.max(this.inferredLiveDVRWindow,this.minLiveDVRWindow)},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,inferredLiveDVRWindow:0,savedState:null}),es=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),Ni=new Set([...es,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","inferredLiveDVRWindow","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function de(a,t=!1){const e=t?es:Ni;Wt.reset(a,s=>e.has(s)),pt()}function pe(a,t){const e=a+t.clipStartTime(),s=Math.floor(a)===Math.floor(t.seekableStart()),i=Math.floor(e)===Math.floor(t.seekableEnd());return s?t.seekableStart():i?t.seekableEnd():t.isLiveDVR()&&t.liveDVRWindow()>0&&e<t.seekableEnd()-t.liveDVRWindow()?t.bufferedStart():Math.min(Math.max(t.seekableStart()+.1,e),t.seekableEnd()-.1)}class ss extends Ys{items=[];[k.readonly]=!1;get length(){return this.items.length}get readonly(){return this[k.readonly]}indexOf(t){return this.items.indexOf(t)}getById(t){return t===""?null:this.items.find(e=>e.id===t)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[k.add](t,e){const s=this.items.length;""+s in this||Object.defineProperty(this,s,{get(){return this.items[s]}}),!this.items.includes(t)&&(this.items.push(t),this.dispatchEvent(new O("add",{detail:t,trigger:e})))}[k.remove](t,e){const s=this.items.indexOf(t);s>=0&&(this[k.onRemove]?.(t,e),this.items.splice(s,1),this.dispatchEvent(new O("remove",{detail:t,trigger:e})))}[k.reset](t){for(const e of[...this.items])this[k.remove](e,t);this.items=[],this[k.setReadonly](!1,t),this[k.onReset]?.()}[k.setReadonly](t,e){this[k.readonly]!==t&&(this[k.readonly]=t,this.dispatchEvent(new O("readonly-change",{detail:t,trigger:e})))}}const _t=Symbol(0);class is extends ss{get selected(){return this.items.find(t=>t.selected)??null}get selectedIndex(){return this.items.findIndex(t=>t.selected)}[k.onRemove](t,e){this[k.select](t,!1,e)}[k.add](t,e){t[_t]=!1,Object.defineProperty(t,"selected",{get(){return this[_t]},set:s=>{this.readonly||(this[k.onUserSelect]?.(),this[k.select](t,s))}}),super[k.add](t,e)}[k.select](t,e,s){if(e===t?.[_t])return;const i=this.selected;t&&(t[_t]=e),(e?i!==t:i===t)&&(i&&(i[_t]=!1),this.dispatchEvent(new O("change",{detail:{prev:i,current:this.selected},trigger:s})))}}class as extends is{#t=!1;switch="current";get auto(){return this.#t||this.readonly}[Z.enableAuto];[k.onUserSelect](){this[Z.setAuto](!1)}[k.onReset](t){this[Z.enableAuto]=void 0,this[Z.setAuto](!1,t)}autoSelect(t){this.readonly||this.#t||!this[Z.enableAuto]||(this[Z.enableAuto]?.(t),this[Z.setAuto](!0,t))}getBySrc(t){return this.items.find(e=>e.src===t)}[Z.setAuto](t,e){this.#t!==t&&(this.#t=t,this.dispatchEvent(new O("auto-change",{detail:t,trigger:e})))}}class ns extends kt{#t;#e;constructor(t,e){super(),this.#t=t,this.#e=e}async onAttach(t){const e=this.$props[this.#t]();if(e==="eager")requestAnimationFrame(this.#e);else if(e==="idle")Xs(this.#e);else if(e==="visible"){let s,i=new IntersectionObserver(n=>{this.scope&&n[0].isIntersecting&&(s?.(),s=void 0,this.#e())});i.observe(t),s=T(()=>i.disconnect())}}}class Hi{#t;#e;constructor(t,e){this.#t=t,this.#e=e}notify(t,...e){this.#t(new O(t,{detail:e?.[0],trigger:e?.[1]}))}async ready(t,e){return Ft(async()=>{this.#e;const{autoPlay:s,canPlay:i,started:n,duration:r,seekable:o,buffered:l,remotePlaybackInfo:u,playsInline:c,savedState:p,source:f}=this.#e.$state;if(i())return;const g={duration:t?.duration??r(),seekable:t?.seekable??o(),buffered:t?.buffered??l(),provider:this.#e.$provider()};this.notify("can-play",g,e),pt();let y=this.#e.$provider(),{storage:D,qualities:R}=this.#e,{muted:z,volume:ut,clipStartTime:at,playbackRate:et}=this.#e.$props;await D?.onLoad?.(f());const nt=p()?.currentTime,ct=p()?.paused,q=await D?.getTime(),K=nt??q??at(),bt=ct===!1||ct!==!0&&!n()&&s();if(y){y.setVolume(await D?.getVolume()??ut()),y.setMuted(z()||!!await D?.getMuted());const G=await D?.getAudioGain()??1;G>1&&y.audioGain?.setGain?.(G),y.setPlaybackRate?.(await D?.getPlaybackRate()??et()),y.setPlaysInline?.(c()),K>0&&y.setCurrentTime(K)}const U=await D?.getVideoQuality();if(U&&R.length){let G=null,rt=1/0;for(const wt of R){const Re=Math.abs(U.width-wt.width)+Math.abs(U.height-wt.height)+(U.bitrate?Math.abs(U.bitrate-(wt.bitrate??0)):0);Re<rt&&(G=wt,rt=Re)}G&&(G.selected=!0)}i()&&bt?await this.#s(e):q&&q>0&&this.notify("started",void 0,e),u.set(null)})}async#s(t){const{player:e,$state:{autoPlaying:s,muted:i}}=this.#e;s.set(!0);const n=new O("auto-play-attempt",{trigger:t});try{await e.play(n)}catch{}}}const me=$t.fullscreenEnabled;class Bi extends Y{#t=!1;#e=!1;get active(){return this.#e}get supported(){return me}onConnect(){new I($t).add("fullscreenchange",this.#i.bind(this)).add("fullscreenerror",this.#a.bind(this)),T(this.#s.bind(this))}async#s(){me&&await this.exit()}#i(t){const e=fe(this.el);e!==this.#e&&(e||(this.#t=!1),this.#e=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}#a(t){this.#t&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.#t=!1)}async enter(){try{return this.#t=!0,!this.el||fe(this.el)?void 0:(rs(),$t.requestFullscreen(this.el))}catch(t){throw this.#t=!1,t}}async exit(){if(!(!this.el||!fe(this.el)))return rs(),$t.exitFullscreen()}}function fe(a){if($t.fullscreenElement===a)return!0;try{return a.matches($t.fullscreenPseudoClass)}catch{return!1}}function rs(){if(!me)throw Error("[vidstack] no fullscreen API")}class se extends Y{#t=v(this.#r());#e=v(!1);#s;get type(){return this.#t()}get locked(){return this.#e()}get portrait(){return this.#t().startsWith("portrait")}get landscape(){return this.#t().startsWith("landscape")}static supported=Qe();get supported(){return se.supported}onConnect(){if(this.supported)Q(screen.orientation,"change",this.#a.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.#a.bind(this),T(()=>t.onchange=null)}T(this.#i.bind(this))}async#i(){this.supported&&this.#e()&&await this.unlock()}#a(t){this.#t.set(this.#r()),this.dispatch("orientation-change",{detail:{orientation:d(this.#t),lock:this.#s},trigger:t})}async lock(t){d(this.#e)||this.#s===t||(this.#n(),await screen.orientation.lock(t),this.#e.set(!0),this.#s=t)}async unlock(){d(this.#e)&&(this.#n(),this.#s=void 0,await screen.orientation.unlock(),this.#e.set(!1))}#n(){if(!this.supported)throw Error("[vidstack] no orientation API")}#r(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}class Gi{#t=new Map;enqueue(t,e){this.#t.set(t,e)}serve(t){const e=this.peek(t);return this.#t.delete(t),e}peek(t){return this.#t.get(t)}delete(t){this.#t.delete(t)}clear(){this.#t.clear()}}class os{#t=!1;#e=Oe();#s=new Map;get size(){return this.#s.size}get isServing(){return this.#t}async waitForFlush(){this.#t||await this.#e.promise}enqueue(t,e){if(this.#t){e();return}this.#s.delete(t),this.#s.set(t,e)}serve(t){this.#s.get(t)?.(),this.#s.delete(t)}start(){this.#i(),this.#t=!0,this.#s.size>0&&this.#i()}stop(){this.#t=!1}reset(){this.stop(),this.#s.clear(),this.#a()}#i(){for(const t of this.#s.keys())this.serve(t);this.#a()}#a(){this.#e.resolve(),this.#e=Oe()}}function ls(a,t){const e=t.composedPath()[0];return Fe(e)&&a.contains(e)}const ge=new Set;{let a=function(){for(const t of ge)try{t()}catch{}window.requestAnimationFrame(a)};a()}function Ki(a){return ge.add(a),()=>ge.delete(a)}function _(a,t,e){a.hasAttribute(t)||a.setAttribute(t,e)}function Pt(a,t){if(a.hasAttribute("aria-label")||a.hasAttribute("data-no-label"))return;if(!ti(t)){m(a,"aria-label",t);return}function e(){m(a,"aria-label",t())}h(e)}function hs(a){const t=getComputedStyle(a);return t.display!=="none"&&parseInt(t.opacity)>0}function Ui(a){return!!a&&("checkVisibility"in a?a.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):hs(a))}function us(a,t){return Ki(()=>t(Ui(a)))}function cs(a,t,e){for(;t;){if(t===a)return!0;if(e?.(t))break;t=t.parentElement}return!1}function gt(a,t){return new I(a).add("pointerup",e=>{e.button===0&&!e.defaultPrevented&&t(e)}).add("keydown",e=>{Ot(e)&&t(e)})}function ds(a){return Js(a)&&(a.touches.length>1||a.changedTouches.length>1)}function Qi(a){let t=Zs(),e=window.requestAnimationFrame(()=>{ae(a,t),e=-1});return()=>void window.cancelAnimationFrame(e)}function Wi(a,t,e){let s,i=a,n=a.parentElement,r=a.content.firstElementChild,o=[];!r&&a.firstElementChild&&(a.innerHTML=a.firstElementChild.outerHTML,a.firstElementChild.remove(),r=a.content.firstElementChild);for(let l=0;l<t;l++)s=document.importNode(r,!0),e?.(s,l),n.insertBefore(s,i.nextSibling),o.push(s),i=s;return T(()=>{for(let l=0;l<o.length;l++)o[l].remove()}),o}function ps(a){const t=document.createElement("template");return t.innerHTML=a,t.content}function ms(a){return a.cloneNode(!0).firstElementChild}function ji(a,t,e,{offsetVarName:s,xOffset:i,yOffset:n,...r}){if(!a)return;const o=e.replace(" ","-").replace("-center","");if(mt(a,"visibility",t?null:"hidden"),!t)return;let l=e.includes("top");const u=p=>e.includes("left")?`calc(-1 * ${p})`:p,c=p=>l?`calc(-1 * ${p})`:p;return ei(t,a,()=>{si(t,a,{placement:o,middleware:[...r.middleware??[],ii({fallbackAxisSideDirection:"start",crossAxis:!1}),ai()],...r}).then(({x:p,y:f,middlewareData:g})=>{const y=!!g.flip?.index;l=e.includes(y?"bottom":"top"),a.setAttribute("data-placement",y?e.startsWith("top")?e.replace("top","bottom"):e.replace("bottom","top"):e),Object.assign(a.style,{top:`calc(${f+"px"} + ${c(n?n+"px":`var(--${s}-y-offset, 0px)`)})`,left:`calc(${p+"px"} + ${u(i?i+"px":`var(--${s}-x-offset, 0px)`)})`})})})}function zi(a){return getComputedStyle(a).animationName!=="none"}function Et(a){return a instanceof HTMLElement}class fs extends kt{#t=-2;#e=!1;#s=v(!1);#i=v(!1);#a=null;#n=v(!0);defaultDelay=2e3;get canIdle(){return this.#n()}set canIdle(t){this.#n.set(t)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.#s()||t()}set hideOnMouseLeave(t){this.#s.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.#f(),this.#e||this.#g(!0,t,e)}hide(t=this.defaultDelay,e){this.#f(),this.#e||this.#g(!1,t,e)}pause(t){this.#e=!0,this.#f(),this.#g(!0,0,t)}resume(t){this.#e=!1,!this.$state.paused()&&this.#g(!1,this.defaultDelay,t)}onConnect(){h(this.#r.bind(this))}#r(){const{viewType:t}=this.$state;if(!this.el||!this.#n())return;if(t()==="audio"){this.show();return}h(this.#o.bind(this)),h(this.#l.bind(this));const e=this.#u.bind(this),s=this.#d.bind(this),i=this.#c.bind(this);new I(this.el).add("can-play",n=>this.show(0,n)).add("play",e).add("pause",s).add("end",i).add("auto-play-fail",s)}#o(){if(!this.el)return;const{started:t,pointer:e,paused:s}=this.$state;if(!t()||e()!=="fine")return;const i=new I(this.el),n=this.hideOnMouseLeave;(!n||!this.#i())&&h(()=>{s()||i.add("pointermove",this.#b.bind(this))}),n&&i.add("mouseenter",this.#h.bind(this)).add("mouseleave",this.#p.bind(this))}#l(){const{paused:t,started:e,autoPlayError:s}=this.$state;if(t()||s()&&!e())return;const i=this.#b.bind(this);h(()=>{if(!this.el)return;const n=this.$state.pointer(),r=n==="coarse",o=new I(this.el),l=[r?"touchend":"pointerup","keydown"];for(const u of l)o.add(u,i,{passive:!1})})}#u(t){t.triggers.hasType("ended")||(this.show(0,t),this.hide(void 0,t))}#d(t){this.show(0,t)}#c(t){const{loop:e}=this.$state;e()&&this.hide(0,t)}#h(t){this.#i.set(!1),this.show(0,t),this.hide(void 0,t)}#p(t){this.#i.set(!0),this.hide(0,t)}#f(){window.clearTimeout(this.#t),this.#t=-1}#b(t){t.MEDIA_GESTURE||this.#e||ds(t)||(Nt(t)&&(t.key==="Escape"?(this.el?.focus(),this.#a=null):this.#a&&(t.preventDefault(),requestAnimationFrame(()=>{this.#a?.focus(),this.#a=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}#g(t,e,s){if(e===0){this.#w(t,s);return}this.#t=window.setTimeout(()=>{this.scope&&this.#w(t&&!this.#e,s)},e)}#w(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#a=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:e}))}}class Yi extends kt{#t;#e;#s;controls;#i;#a;#n;#r=new os;constructor(t,e,s){super(),this.#t=t,this.#e=e,this.#s=s,this.#n=s.$provider,this.controls=new fs,this.#i=new Bi,this.#a=new se}onAttach(){this.listen("fullscreen-change",this.#k.bind(this))}onConnect(t){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),s=new I(t),i=this.#u.bind(this);for(const n of e)n.startsWith("media-")&&s.add(n,i);this.#o(),h(this.#l.bind(this)),h(this.#f.bind(this)),h(this.#b.bind(this)),h(this.#g.bind(this)),h(this.#w.bind(this)),h(this.#v.bind(this)),h(this.#T.bind(this))}onDestroy(){try{const t=this.createEvent("destroy"),{pictureInPicture:e,fullscreen:s}=this.$state;s()&&this.exitFullscreen("prefer-media",t),e()&&this.exitPictureInPicture(t)}catch{}this.#r.reset()}#o(){const{load:t}=this.$props,{canLoad:e}=this.$state;if(t()!=="play"||e())return;const s=this.listen("media-play-request",i=>{this.#d(i),s()})}#l(){const t=this.#n(),e=this.$state.canPlay();return t&&e&&this.#r.start(),()=>{this.#r.stop()}}#u(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(d(this.#n)?this[t.type](t):this.#r.enqueue(t.type,()=>{d(this.#n)&&this[t.type](t)}))}async play(t){const{canPlay:e,paused:s,autoPlaying:i}=this.$state;if(this.#d(t)||!d(s))return;t&&this.#e.queue.enqueue("media-play-request",t);const n=d(i);try{const r=d(this.#n);return ye(r,d(e)),await r.play()}catch(r){const o=this.createEvent("play-fail",{detail:le(r),trigger:t});throw o.autoPlay=n,this.#t.handle(o),r}}#d(t){const{load:e}=this.$props,{canLoad:s}=this.$state;if(e()==="play"&&!s()){const i=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(i),this.#r.enqueue("media-play-request",async()=>{try{await this.play(i)}catch{}}),!0}return!1}async pause(t){const{canPlay:e,paused:s}=this.$state;if(!d(s)){t&&this.#e.queue.enqueue("media-pause-request",t);try{const i=d(this.#n);return ye(i,d(e)),await i.pause()}catch(i){throw this.#e.queue.delete("media-pause-request"),i}}}setAudioGain(t,e){const{audioGain:s,canSetAudioGain:i}=this.$state;if(s()===t)return;const n=this.#n();if(!n?.audioGain||!i())throw Error("[vidstack] audio gain api not available");e&&this.#e.queue.enqueue("media-audio-gain-change-request",e),n.audioGain.setGain(t)}seekToLiveEdge(t){const{canPlay:e,live:s,liveEdge:i,canSeek:n,liveSyncPosition:r,seekableEnd:o,userBehindLiveEdge:l}=this.$state;if(l.set(!1),d(()=>!s()||i()||!n()))return;const u=d(this.#n);ye(u,d(e)),t&&this.#e.queue.enqueue("media-seek-request",t);const c=o()-2;u.setCurrentTime(Math.min(c,r()??c))}#c=!1;async enterFullscreen(t="prefer-media",e){const s=this.#h(t);if(gs(t,s),!s.active)return d(this.$state.pictureInPicture)&&(this.#c=!0,await this.exitPictureInPicture(e)),e&&this.#e.queue.enqueue("media-enter-fullscreen-request",e),s.enter()}async exitFullscreen(t="prefer-media",e){const s=this.#h(t);if(gs(t,s),!!s.active){e&&this.#e.queue.enqueue("media-exit-fullscreen-request",e);try{const i=await s.exit();return this.#c&&d(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),i}finally{this.#c=!1}}}#h(t){const e=d(this.#n);return t==="prefer-media"&&this.#i.supported||t==="media"?this.#i:e?.fullscreen}async enterPictureInPicture(t){if(this.#p(),!this.$state.pictureInPicture())return t&&this.#e.queue.enqueue("media-enter-pip-request",t),await this.#n().pictureInPicture.enter()}async exitPictureInPicture(t){if(this.#p(),!!this.$state.pictureInPicture())return t&&this.#e.queue.enqueue("media-exit-pip-request",t),await this.#n().pictureInPicture.exit()}#p(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#f(){this.controls.defaultDelay=this.$props.controlsDelay()}#b(){const{canSetAudioGain:t}=this.$state,e=!!this.#n()?.audioGain?.supported;t.set(e)}#g(){const{canAirPlay:t}=this.$state,e=!!this.#n()?.airPlay?.supported;t.set(e)}#w(){const{canGoogleCast:t,source:e}=this.$state,s=wi&&!$i&&vi(e());t.set(s)}#v(){const{canFullscreen:t}=this.$state,e=this.#i.supported||!!this.#n()?.fullscreen?.supported;t.set(e)}#T(){const{canPictureInPicture:t}=this.$state,e=!!this.#n()?.pictureInPicture?.supported;t.set(e)}async"media-airplay-request"(t){try{await this.requestAirPlay(t)}catch{}}async requestAirPlay(t){try{const e=this.#n()?.airPlay;if(!e?.supported)throw Error("No AirPlay adapter.");return t&&this.#e.queue.enqueue("media-airplay-request",t),await e.prompt()}catch(e){throw this.#e.queue.delete("media-airplay-request"),e}}async"media-google-cast-request"(t){try{await this.requestGoogleCast(t)}catch{}}#y;async requestGoogleCast(t){try{const{canGoogleCast:e}=this.$state;if(!d(e)){const i=Error("Cast not available.");throw i.code="CAST_NOT_AVAILABLE",i}if(qt("https://www.gstatic.com"),!this.#y){const i=await import("./vidstack-DI8JGzwB.js");this.#y=new i.GoogleCastLoader}await this.#y.prompt(this.#s),t&&this.#e.queue.enqueue("media-google-cast-request",t);const s=d(this.$state.remotePlaybackState)!=="disconnected";s&&this.$state.savedState.set({paused:d(this.$state.paused),currentTime:d(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(s?this.#y:null)}catch(e){throw this.#e.queue.delete("media-google-cast-request"),e}}"media-clip-start-change-request"(t){const{clipStartTime:e}=this.$state;e.set(t.detail)}"media-clip-end-change-request"(t){const{clipEndTime:e}=this.$state;e.set(t.detail),this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-duration-change-request"(t){const{providedDuration:e,clipEndTime:s}=this.$state;e.set(t.detail),s()<=0&&this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-audio-track-change-request"(t){const{logger:e,audioTracks:s}=this.#s;if(s.readonly)return;const i=t.detail,n=s[i];if(n){const r=t.type;this.#e.queue.enqueue(r,t),n.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this.enterFullscreen(t.detail,t)}catch(e){this.#m(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.exitFullscreen(t.detail,t)}catch(e){this.#m(e,t)}}async#k(t){const e=d(this.$props.fullscreenOrientation),s=t.detail;if(!(ni(e)||e==="none"||!this.#a.supported))if(s){if(this.#a.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.#a.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}#m(t,e){this.#t.handle(this.createEvent("fullscreen-error",{detail:le(t)}))}async"media-orientation-lock-request"(t){const e=t.type;try{this.#e.queue.enqueue(e,t),await this.#a.lock(t.detail)}catch{this.#e.queue.delete(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{this.#e.queue.enqueue(e,t),await this.#a.unlock()}catch{this.#e.queue.delete(e)}}async"media-enter-pip-request"(t){try{await this.enterPictureInPicture(t)}catch(e){this.#$(e,t)}}async"media-exit-pip-request"(t){try{await this.exitPictureInPicture(t)}catch(e){this.#$(e,t)}}#$(t,e){this.#t.handle(this.createEvent("picture-in-picture-error",{detail:le(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(!(!e()||s()||!i())){this.#e.queue.enqueue("media-seek-request",t);try{this.seekToLiveEdge()}catch{this.#e.queue.delete("media-seek-request")}}}async"media-loop-request"(t){try{this.#e.looping=!0,this.#e.replaying=!0,await this.play(t)}catch{this.#e.looping=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.pause(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.play(t)}catch{}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const i=this.#n();i?.setPlaybackRate&&(this.#e.queue.enqueue("media-rate-change-request",t),i.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.setAudioGain(t.detail,t)}catch{}}"media-quality-change-request"(t){const{qualities:e,storage:s,logger:i}=this.#s;if(e.readonly)return;this.#e.queue.enqueue("media-quality-change-request",t);const n=t.detail;if(n<0)e.autoSelect(t),t.isOriginTrusted&&s?.setVideoQuality?.(null);else{const r=e[n];r&&(r.selected=!0,t.isOriginTrusted&&s?.setVideoQuality?.({id:r.id,width:r.width,height:r.height,bitrate:r.bitrate}))}}"media-pause-controls-request"(t){const e=t.type;this.#e.queue.enqueue(e,t),this.controls.pause(t)}"media-resume-controls-request"(t){const e=t.type;this.#e.queue.enqueue(e,t),this.controls.resume(t)}"media-seek-request"(t){const{canSeek:e,ended:s,live:i,seekableEnd:n,userBehindLiveEdge:r}=this.$state,o=t.detail;s()&&(this.#e.replaying=!0);const l=t.type;this.#e.seeking=!1,this.#e.queue.delete(l);const u=pe(o,this.$state);!Number.isFinite(u)||!e()||(this.#e.queue.enqueue(l,t),this.#n().setCurrentTime(u),i()&&t.isOriginTrusted&&Math.abs(n()-u)>=2&&r.set(!0))}"media-seeking-request"(t){const e=t.type;this.#e.queue.enqueue(e,t),this.$state.seeking.set(!0),this.#e.seeking=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;this.#e.queue.enqueue(e,t),this.#t.handle(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;this.#e.queue.enqueue(e,t),this.#t.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.#s.textTracks[e];if(i){const n=t.type;this.#e.queue.enqueue(n,t),i.setMode(s,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;this.#e.queue.enqueue(e,t),this.#n().setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;if(!e())return;const i=t.type;this.#e.queue.enqueue(i,t),this.#s.$provider().setMuted(!1),s()===0&&(this.#e.queue.enqueue(i,t),this.#n().setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;if(s()===i)return;const n=t.type;this.#e.queue.enqueue(n,t),this.#n().setVolume(i),i>0&&e()&&(this.#e.queue.enqueue(n,t),this.#n().setMuted(!1))}#P(t,e,s){}}function ye(a,t){if(!(a&&t))throw Error("[vidstack] media not ready")}function gs(a,t){if(!t?.supported)throw Error("[vidstack] no fullscreen support")}class Xi{seeking=!1;looping=!1;replaying=!1;queue=new Gi}function jt(a){return!w(a)&&"width"in a&&"height"in a&&ot(a.width)&&ot(a.height)}const Ji=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class Zi extends kt{#t;#e;#s=new Map;#i=!1;#a=[];#n=[-1,-1];#r=!1;#o;constructor(t,e){super(),this.#t=t,this.#e=e}onAttach(t){t.setAttribute("aria-busy","true"),new I(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(t){h(this.#A.bind(this)),this.#p(),this.#f(),this.#b(),this.#u(),T(this.#d.bind(this))}onDestroy(){const{audioTracks:t,qualities:e,textTracks:s}=this.#e;t[k.reset](),e[k.reset](),s[k.reset](),this.#S()}handle(t){if(!this.scope)return;const e=t.type;Ft(()=>this[t.type]?.(t)),Ji.has(e)&&this.#s.set(e,t),this.dispatch(t)}#l=!1;#u(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#e.remote.play(new O("dom-connect"))}),this.#l=!1)}#d(){this.#l||(this.#l=!this.$state.paused(),this.#e.$provider()?.pause())}#c(){this.#I(),this.#i=!1,this.#t.replaying=!1,this.#t.looping=!1,this.#r=!1,this.#o=void 0,this.#s.clear()}#h(t,e){const s=this.#t.queue.serve(t);s&&(e.request=s,e.triggers.add(s))}#p(){this.#g(),this.#w();const t=this.#e.textTracks;new I(t).add("add",this.#g.bind(this)).add("remove",this.#g.bind(this)).add("mode-change",this.#w.bind(this))}#f(){const t=this.#e.qualities;new I(t).add("add",this.#y.bind(this)).add("remove",this.#y.bind(this)).add("change",this.#k.bind(this)).add("auto-change",this.#m.bind(this)).add("readonly-change",this.#x.bind(this))}#b(){const t=this.#e.audioTracks;new I(t).add("add",this.#v.bind(this)).add("remove",this.#v.bind(this)).add("change",this.#T.bind(this))}#g(t){const{textTracks:e}=this.$state;e.set(this.#e.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}#w(t){t&&this.#h("media-text-track-change-request",t);const e=this.#e.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}#v(t){const{audioTracks:e}=this.$state;e.set(this.#e.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}#T(t){const{audioTrack:e}=this.$state;e.set(this.#e.audioTracks.selected),t&&this.#h("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}#y(t){const{qualities:e}=this.$state;e.set(this.#e.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}#k(t){const{quality:e}=this.$state;e.set(this.#e.qualities.selected),t&&this.#h("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}#m(){const{qualities:t}=this.#e,e=t.auto;this.$state.autoQuality.set(e),e||this.#S()}#$=null;#P(){this.#S(),this.#$=h(()=>{const{qualities:t}=this.#e,{mediaWidth:e,mediaHeight:s}=this.$state,i=e(),n=s();if(i===0||n===0)return;let r=null,o=1/0;for(const l of t){const u=Math.abs(l.width-i)+Math.abs(l.height-n);u<o&&(o=u,r=l)}r&&t[k.select](r,!0,new O("resize",{detail:{width:i,height:n}}))})}#S(){this.#$?.(),this.#$=null}#x(){this.$state.canSetQuality.set(!this.#e.qualities.readonly)}#A(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e()){t.set(!1);return}Ti().then(t.set)}"provider-change"(t){const e=this.#e.$provider(),s=t.detail;e?.type!==s?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.#e.$provider.set(t.detail),e&&t.detail===null&&this.#C(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.#c()}"can-load"(t){this.$state.canLoad.set(!0),this.#s.set("can-load",t),this.#e.textTracks[N.canLoad](),this.#h("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.#s.set("can-load-poster",t),this.#h("media-poster-start-loading",t)}"media-type-change"(t){const e=this.#s.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const i=this.$state.providedViewType(),n=i==="unknown"?t.detail:i;s!==n&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:n,trigger:t}))})},0)}"stream-type-change"(t){const e=this.#s.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:i}=this.$state;i.set(t.detail),t.detail=s()}"rate-change"(t){const{storage:e}=this.#e,{canPlay:s}=this.$state;this.$state.playbackRate.set(t.detail),this.#h("media-rate-change-request",t),s()&&e?.setPlaybackRate?.(t.detail)}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:s}=this.$state,{type:i,state:n}=t.detail,r=n==="connected";s.set(i),e.set(n);const o=i==="airplay"?"media-airplay-request":"media-google-cast-request";if(r)this.#h(o,t);else{const l=this.#t.queue.peek(o);l&&(t.request=l,t.triggers.add(l))}}"sources-change"(t){const e=this.$state.sources(),s=t.detail;this.$state.sources.set(s),this.#M(e,s,t)}#M(t,e,s){let{qualities:i}=this.#e,n=!1,r=!1;for(const o of t){if(!jt(o))continue;if(!e.some(u=>u.src===o.src)){const u=i.getBySrc(o.src);u&&(i[k.remove](u,s),r=!0)}}r&&!i.length&&(this.$state.savedState.set(null),i[k.reset](s));for(const o of e){if(!jt(o)||i.getBySrc(o.src))continue;const l={id:o.id??o.height+"p",bitrate:null,codec:null,...o,selected:!1};i[k.add](l,s),n=!0}n&&!i[Z.enableAuto]&&(this.#P(),i[Z.enableAuto]=this.#P.bind(this),i[Z.setAuto](!0,s))}"source-change"(t){t.isQualityChange=t.originEvent?.type==="quality-change";const e=t.detail;this.#C(t,t.isQualityChange),this.#s.set(t.type,t),this.$state.source.set(e),this.el?.setAttribute("aria-busy","true")}#C(t,e=!1){const{audioTracks:s,qualities:i}=this.#e;if(!e){this.#a=[],this.#n=[-1,-1],s[k.reset](t),i[k.reset](t),de(this.$state,e),this.#c();return}de(this.$state,e),this.#c()}abort(t){const e=this.#s.get("source-change");e&&t.triggers.add(e);const s=this.#s.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.#s.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.#s.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.#s.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.#s.get("load-start");e&&t.triggers.add(e)}"can-play"(t){const e=this.#s.get("loaded-metadata");e&&t.triggers.add(e),this.#L(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.#L(t.detail);const e=this.#s.get("can-play");e&&t.triggers.add(e)}#L(t){const{seekable:e,buffered:s,intrinsicDuration:i,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),e.set(t.seekable);const r=Tt(t.seekable)??1/0;i.set(r)}"duration-change"(t){const{live:e,intrinsicDuration:s,providedDuration:i,clipEndTime:n,ended:r}=this.$state,o=t.detail;if(!e()){const l=Number.isNaN(o)?0:o;s.set(l),r()&&this.#_(t)}(i()>0||n()>0)&&t.stopImmediatePropagation()}progress(t){const{buffered:e,seekable:s}=this.$state,{buffered:i,seekable:n}=t.detail,r=Tt(i),o=i.length!==e().length,l=r!==Tt(e()),u=Tt(n),c=n.length!==s().length,p=u!==Tt(s());(o||l)&&e.set(i),(c||p)&&s.set(n)}play(t){const{paused:e,autoPlayError:s,ended:i,autoPlaying:n,playsInline:r,pointer:o,muted:l,viewType:u,live:c,userBehindLiveEdge:p}=this.$state;if(this.#q(),!e()){t.stopImmediatePropagation();return}t.autoPlay=n();const f=this.#s.get("waiting");f&&t.triggers.add(f),this.#h("media-play-request",t),this.#s.set("play",t),e.set(!1),s.set(null),t.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:l()},trigger:t})),n.set(!1)),(i()||this.#t.replaying)&&(this.#t.replaying=!1,i.set(!1),this.handle(this.createEvent("replay",{trigger:t}))),!r()&&u()==="video"&&o()==="coarse"&&this.#e.remote.enterFullscreen("prefer-media",t),c()&&!p()&&this.#e.remote.seekToLiveEdge(t)}#q(t){if(!d(this.#e.$provider))return;const{ended:s,seekableStart:i,clipEndTime:n,currentTime:r,realCurrentTime:o,duration:l}=this.$state,u=s()||o()<i()||n()>0&&o()>=n()||Math.abs(r()-l())<.1;return u&&this.dispatch("media-seek-request",{detail:i(),trigger:t}),u}"play-fail"(t){const{muted:e,autoPlaying:s}=this.$state,i=this.#s.get("play");i&&t.triggers.add(i),this.#h("media-play-request",t);const{paused:n,playing:r}=this.$state;n.set(!0),r.set(!1),this.#c(),this.#s.set("play-fail",t),t.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.#s.get("play"),s=this.#s.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout(()=>this.#c(),0);const{paused:i,playing:n,live:r,liveSyncPosition:o,seekableEnd:l,started:u,currentTime:c,seeking:p,ended:f}=this.$state;if(i.set(!1),n.set(!0),p.set(!1),f.set(!1),this.#t.looping){this.#t.looping=!1;return}if(r()&&!u()&&c()===0){const g=o()??l()-2;Number.isFinite(g)&&this.#e.$provider().setCurrentTime(g)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.handle(this.createEvent("started",{trigger:t})))}pause(t){this.el?.isConnected||(this.#l=!0),this.#h("media-pause-request",t);const e=this.#s.get("seeked");e&&t.triggers.add(e);const{paused:s,playing:i}=this.$state;s.set(!0),i.set(!1),this.#i&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:t})),this.#i=!1},0),this.#c()}"time-change"(t){if(this.#t.looping){t.stopImmediatePropagation();return}let{waiting:e,played:s,clipEndTime:i,realCurrentTime:n,currentTime:r}=this.$state,o=t.detail,l=i();n.set(o),this.#D(),e.set(!1);for(const u of this.#e.textTracks)u[N.updateActiveCues](o,t);l>0&&o>=l&&(this.#i=!0,this.dispatch("media-pause-request",{trigger:t})),this.#V(),this.dispatch("time-update",{detail:{currentTime:r(),played:s()},trigger:t})}#D(){const{currentTime:t,played:e,paused:s}=this.$state;s()||(this.#n=Ei(this.#a,this.#n,t()),e.set(new Gt(this.#a)))}#_(t){const{clipStartTime:e,clipEndTime:s,duration:i}=this.$state;e()>0||s()>0||this.handle(this.createEvent("time-change",{detail:i(),trigger:t}))}#V(){const{storage:t}=this.#e,{canPlay:e,realCurrentTime:s}=this.$state;e()&&t?.setTime?.(s())}"audio-gain-change"(t){const{storage:e}=this.#e,{canPlay:s,audioGain:i}=this.$state;i.set(t.detail),this.#h("media-audio-gain-change-request",t),s()&&e?.setAudioGain?.(i())}"volume-change"(t){const{storage:e}=this.#e,{volume:s,muted:i,canPlay:n}=this.$state,r=t.detail;s.set(r.volume),i.set(r.muted||r.volume===0),this.#h("media-volume-change-request",t),this.#h(r.muted?"media-mute-request":"media-unmute-request",t),n()&&(e?.setVolume?.(s()),e?.setMuted?.(i()))}seeking=Lt(t=>{const{seeking:e,realCurrentTime:s,paused:i}=this.$state;e.set(!0),s.set(t.detail),this.#h("media-seeking-request",t),i()&&(this.#o=t,this.#E()),this.#n=[-1,-1]},150,{leading:!0});seeked(t){const{seeking:e,currentTime:s,realCurrentTime:i,paused:n,seekableEnd:r,ended:o,live:l}=this.$state;if(this.#t.seeking)e.set(!0),t.stopImmediatePropagation();else if(e()){const u=this.#s.get("waiting");u&&t.triggers.add(u);const c=this.#s.get("seeking");c&&!t.triggers.has(c)&&t.triggers.add(c),n()&&this.#I(),e.set(!1),i.set(t.detail),this.#h("media-seek-request",t);const p=t?.originEvent;p?.isTrusted&&!(p instanceof MessageEvent)&&!/seek/.test(p.type)&&this.started(t)}l()||(Math.floor(s())!==Math.floor(r())?o.set(!1):this.end(t))}waiting(t){this.#r||this.#t.seeking||(t.stopImmediatePropagation(),this.#o=t,this.#E())}#E=Ne(()=>{if(!this.#o)return;this.#r=!0;const{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);const s=this.createEvent("waiting",{trigger:this.#o});this.#s.set("waiting",s),this.dispatch(s),this.#o=void 0,this.#r=!1},300);end(t){const{loop:e,ended:s}=this.$state;if(!(!e()&&s())){if(e()){setTimeout(()=>{requestAnimationFrame(()=>{this.#q(t),this.dispatch("media-loop-request",{trigger:t})})},10);return}setTimeout(()=>this.#R(t),0)}}#R(t){const{storage:e}=this.#e,{paused:s,seeking:i,ended:n,duration:r}=this.$state;this.#_(t),s()||this.dispatch("pause",{trigger:t}),i()&&this.dispatch("seeked",{detail:r(),trigger:t}),n.set(!0),this.#c(),e?.setTime?.(r(),!0),this.dispatch("ended",{trigger:t})}#I(){this.#E.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),this.#h(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.#h("media-enter-fullscreen-request",t),this.#h("media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;this.#h(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),this.#h(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.#h("media-enter-pip-request",t),this.#h("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class ta extends kt{onSetup(){this.#t();const t=[this.#i,this.#n,this.#h,this.#p,this.#o,this.#u,this.#d,this.#f,this.#g,this.#b,this.#r,this.#c,this.#l,this.#e,this.#a];for(const e of t)h(e.bind(this))}#t(){const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const s of Object.keys(this.$props))e.has(s)||this.$state[t[s]??s]?.set(this.$props[s]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#e(){const{viewType:t,streamType:e,title:s,poster:i,loop:n}=this.$props,r=this.$state;r.providedPoster.set(i()),r.providedStreamType.set(e()),r.providedViewType.set(t()),r.providedTitle.set(s()),r.providedLoop.set(n())}#s(){}#i(){const{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())}#a(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}#n(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}#r(){const t=this.$state.loop();this.dispatch("loop-change",{detail:t})}#o(){const t=this.$props.controls();this.$state.controls.set(t)}#l(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}#u(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=t===!0?"":t;this.$state.crossOrigin.set(e)}#d(){const{duration:t}=this.$props;this.dispatch("media-duration-change-request",{detail:t()})}#c(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}#h(){const{clipStartTime:t}=this.$props;this.dispatch("media-clip-start-change-request",{detail:t()})}#p(){const{clipEndTime:t}=this.$props;this.dispatch("media-clip-end-change-request",{detail:t()})}#f(){this.dispatch("live-change",{detail:this.$state.live()})}#b(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#g(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}class ys{playerId="vds-player";mediaId=null;#t={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#t.volume}async setVolume(t){this.#t.volume=t,this.save()}async getMuted(){return this.#t.muted}async setMuted(t){this.#t.muted=t,this.save()}async getTime(){return this.#t.time}async setTime(t,e){const s=t<0;this.#t.time=s?null:t,s||e?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#t.lang}async setLang(t){this.#t.lang=t,this.save()}async getCaptions(){return this.#t.captions}async setCaptions(t){this.#t.captions=t,this.save()}async getPlaybackRate(){return this.#t.rate}async setPlaybackRate(t){this.#t.rate=t,this.save()}async getAudioGain(){return this.#t.audioGain}async setAudioGain(t){this.#t.audioGain=t,this.save()}async getVideoQuality(){return this.#t.quality}async setVideoQuality(t){this.#t.quality=t,this.save()}onChange(t,e,s="vds-player"){const i=s?localStorage.getItem(s):null,n=e?localStorage.getItem(e):null;this.playerId=s,this.mediaId=e,this.#t={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...i?JSON.parse(i):{},time:n?+n:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.#t,time:void 0});localStorage.setItem(this.playerId,t)}saveTimeThrottled=Lt(this.saveTime.bind(this),1e3);saveTime(){if(!this.mediaId)return;const t=(this.#t.time??0).toString();localStorage.setItem(this.mediaId,t)}}const bs=["play","pause","seekforward","seekbackward","seekto"];class ea extends kt{onConnect(){h(this.#e.bind(this)),h(this.#s.bind(this));const t=this.#i.bind(this);for(const e of bs)navigator.mediaSession.setActionHandler(e,t);T(this.#t.bind(this))}#t(){for(const t of bs)navigator.mediaSession.setActionHandler(t,null)}#e(){const{title:t,artist:e,artwork:s,poster:i}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:s()??[{src:i()}]})}#s(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}#i(t){const e=new O("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:ot(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??(t.action==="seekforward"?10:-10)),trigger:e});break}}}class ws{#t=null;#e=null;#s=-1;#i;constructor(t=void 0){this.#i=t}setTarget(t){this.#t=t}getPlayer(t){return this.#e?this.#e:((t??this.#t)?.dispatchEvent(new O("find-media-player",{detail:e=>void(this.#e=e),bubbles:!0,composed:!0})),this.#e)}setPlayer(t){this.#e=t}startLoading(t){this.#a("media-start-loading",t)}startLoadingPoster(t){this.#a("media-poster-start-loading",t)}requestAirPlay(t){this.#a("media-airplay-request",t)}requestGoogleCast(t){this.#a("media-google-cast-request",t)}play(t){this.#a("media-play-request",t)}pause(t){this.#a("media-pause-request",t)}mute(t){this.#a("media-mute-request",t)}unmute(t){this.#a("media-unmute-request",t)}enterFullscreen(t,e){this.#a("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.#a("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.#a("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.#a("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.#a("media-enter-pip-request",t)}exitPictureInPicture(t){this.#a("media-exit-pip-request",t)}seeking(t,e){this.#a("media-seeking-request",e,t)}seek(t,e){this.#a("media-seek-request",e,t)}seekToLiveEdge(t){this.#a("media-live-edge-request",t)}changeDuration(t,e){this.#a("media-duration-change-request",e,t)}changeClipStart(t,e){this.#a("media-clip-start-change-request",e,t)}changeClipEnd(t,e){this.#a("media-clip-end-change-request",e,t)}changeVolume(t,e){this.#a("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.#a("media-audio-track-change-request",e,t)}changeQuality(t,e){this.#a("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.#a("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.#a("media-rate-change-request",e,t)}changeAudioGain(t,e){this.#a("media-audio-gain-change-request",e,t)}resumeControls(t){this.#a("media-resume-controls-request",t)}pauseControls(t){this.#a("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e?.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;let s=e.state.textTracks,i=this.#s;(!s[i]||!H(s[i]))&&(i=-1),i===-1&&(i=s.findIndex(n=>H(n)&&n.default)),i===-1&&(i=s.findIndex(n=>H(n))),i>=0&&this.changeTextTrackMode(i,"showing",t),this.#s=-1}disableCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const n=s.indexOf(i);this.changeTextTrackMode(n,"disabled",t),this.#s=n}}toggleCaptions(t){const e=this.getPlayer(t?.target);e&&(e.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,e){this.#a("media-user-loop-change-request",e,t)}#a(t,e,s){const i=new O(t,{bubbles:!0,composed:!0,cancelable:!0,detail:s,trigger:e});let n=e?.target||null;n&&n instanceof x&&(n=n.el),n=!n||n===document||n===window||n===document.body||this.#e?.el&&n instanceof Node&&!this.#e.el.contains(n)?this.#t??this.getPlayer()?.el:n??this.#t,this.#e?t==="media-play-request"&&!this.#e.state.canLoad?n?.dispatchEvent(i):this.#e.canPlayQueue.enqueue(t,()=>n?.dispatchEvent(i)):n?.dispatchEvent(i)}#n(t){}}class $s extends is{}class sa{priority=0;#t=!0;#e=null;#s=null;#i=new Set;canRender(t,e){return!!e}attach(t){this.#e=t,t&&(t.textTracks.onchange=this.#o.bind(this))}addTrack(t){this.#i.add(t),this.#a(t)}removeTrack(t){t[N.native]?.remove?.(),t[N.native]=null,this.#i.delete(t)}changeTrack(t){const e=t?.[N.native];e&&e.track.mode!=="showing"&&(e.track.mode="showing"),this.#s=t}setDisplay(t){this.#t=t,this.#o()}detach(){this.#e&&(this.#e.textTracks.onchange=null);for(const t of this.#i)this.removeTrack(t);this.#i.clear(),this.#e=null,this.#s=null}#a(t){if(!this.#e)return;const e=t[N.native]??=this.#n(t);Et(e)&&(this.#e.append(e),e.track.mode=e.default?"showing":"disabled")}#n(t){const e=document.createElement("track"),s=t.default||t.mode==="showing",i=t.src&&t.type==="vtt";return e.id=t.id,e.src=i?t.src:"",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.#r(t,e.track),e}#r(t,e){if(!(t.src&&t.type==="vtt"||e.cues?.length))for(const s of t.cues)e.addCue(s)}#o(t){for(const e of this.#i){const s=e[N.native];if(!s)continue;if(!this.#t){s.track.mode=s.managed?"hidden":"disabled";continue}const i=s.track.mode==="showing";i&&this.#r(e,s.track),e.setMode(i?"showing":"disabled",t)}}}class vs{#t=null;#e;#s=[];#i;#a=!1;#n=null;#r=null;constructor(t){this.#i=t;const e=t.textTracks;this.#e=e,h(this.#o.bind(this)),T(this.#p.bind(this)),new I(e).add("add",this.#d.bind(this)).add("remove",this.#c.bind(this)).add("mode-change",this.#h.bind(this))}#o(){const{nativeControls:t}=this.#i.$state;this.#a=t(),this.#h()}add(t){this.#s.push(t),Ft(this.#h.bind(this))}remove(t){t.detach(),this.#s.splice(this.#s.indexOf(t),1),Ft(this.#h.bind(this))}attachVideo(t){requestAnimationFrame(()=>{if(this.#t=t,t){this.#n=new sa,this.#n.attach(t);for(const e of this.#e)this.#l(e)}this.#h()})}#l(t){H(t)&&this.#n?.addTrack(t)}#u(t){H(t)&&this.#n?.removeTrack(t)}#d(t){this.#l(t.detail)}#c(t){this.#u(t.detail)}#h(){const t=this.#e.selected;if(this.#t&&(this.#a||t?.[N.nativeHLS])){this.#r?.changeTrack(null),this.#n?.setDisplay(!0),this.#n?.changeTrack(t);return}if(this.#n?.setDisplay(!1),this.#n?.changeTrack(null),!t){this.#r?.changeTrack(null);return}const e=this.#s.sort((s,i)=>s.priority-i.priority).find(s=>s.canRender(t,this.#t));this.#r!==e&&(this.#r?.detach(),e?.attach(this.#t),this.#r=e??null),e?.changeTrack(t)}#p(){this.#n?.detach(),this.#n=null,this.#r?.detach(),this.#r=null}}class Ts extends ss{#t=!1;#e={};#s=null;#i=null;[N.crossOrigin];constructor(){super()}get selected(){return this.items.find(e=>e.mode==="showing"&&H(e))??null}get selectedIndex(){const t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return this.#i}set preferredLang(t){this.#i=t,this.#u(t)}add(t,e){const s=t instanceof Kt,i=s?t:new Kt(t),n=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return this.#e[n]&&t.default&&delete t.default,i.addEventListener("mode-change",this.#r),this[k.add](i,e),i[N.crossOrigin]=this[N.crossOrigin],this.#t&&i[N.canLoad](),t.default&&(this.#e[n]=i),this.#a(),this}remove(t,e){if(this.#n=t,!!this.items.includes(t))return t===this.#e[t.kind]&&delete this.#e[t.kind],t.mode="disabled",t[N.onModeChange]=null,t.removeEventListener("mode-change",this.#r),this[k.remove](t,e),this.#n=null,this}clear(t){for(const e of[...this.items])this.remove(e,t);return this}getByKind(t){const e=Array.isArray(t)?t:[t];return this.items.filter(s=>e.includes(s.kind))}[N.canLoad](){if(!this.#t){for(const t of this.items)t[N.canLoad]();this.#t=!0,this.#a()}}#a=Ne(async()=>{if(!this.#t)return;!this.#i&&this.#s&&(this.#i=await this.#s.getLang());const t=await this.#s?.getCaptions(),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const s of e){const i=this.getByKind(s);if(i.find(u=>u.mode==="showing"))continue;const n=this.#i?i.find(u=>u.language===this.#i):null,r=X(s)?this.#e[s.find(u=>this.#e[u])||""]:this.#e[s],o=n??r,l=o&&H(o);o&&(!l||t!==!1)&&(o.mode="showing",l&&this.#l(o))}},300);#n=null;#r=this.#o.bind(this);#o(t){const e=t.detail;if(this.#s&&H(e)&&e!==this.#n&&this.#l(e),e.mode==="showing"){const s=H(e)?["captions","subtitles"]:[e.kind];for(const i of this.items)i.mode==="showing"&&i!=e&&s.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new O("mode-change",{detail:t.detail,trigger:t}))}#l(t){t.mode!=="disabled"&&this.#u(t.language),this.#s?.setCaptions?.(t.mode==="showing")}#u(t){this.#s?.setLang?.(this.#i=t)}setStorage(t){this.#s=t}}let be=v(!1);Q(document,"pointerdown",()=>{be.set(!1)}),Q(document,"keydown",a=>{a.metaKey||a.altKey||a.ctrlKey||be.set(!0)});class yt extends Y{#t=v(!1);onConnect(t){h(()=>{const e=new I(t);if(!be()){this.#t.set(!1),zt(t,!1),e.add("pointerenter",this.#i.bind(this)).add("pointerleave",this.#a.bind(this));return}const s=document.activeElement===t;this.#t.set(s),zt(t,s),e.add("focus",this.#e.bind(this)).add("blur",this.#s.bind(this))})}focused(){return this.#t()}#e(){this.#t.set(!0),zt(this.el,!0)}#s(){this.#t.set(!1),zt(this.el,!1)}#i(){ks(this.el,!0)}#a(){ks(this.el,!1)}}function zt(a,t){m(a,"data-focus",t),m(a,"data-hocus",t)}function ks(a,t){m(a,"data-hocus",t),m(a,"data-hover",t)}class Mt extends x{static props=Fi;static state=Wt;#t;#e;#s;canPlayQueue=new os;remoteControl;get#i(){return this.#t.$provider()}get#a(){return this.$props}constructor(){super(),new ta;const t={player:this,qualities:new as,audioTracks:new $s,storage:null,$provider:v(null),$providerSetup:v(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new ws(void 0),t.remote.setPlayer(this),t.textTracks=new Ts,t.textTracks[N.crossOrigin]=this.$state.crossOrigin,t.textRenderers=new vs(t),t.ariaKeys={},this.#t=t,st(ce,t),this.orientation=new se,new yt,new Vi(t);const e=new Xi;this.#e=new Zi(e,t),this.#s=new Yi(this.#e,e,t),t.delegate=new Hi(this.#e.handle.bind(this.#e),t),t.notify=t.delegate.notify.bind(t.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new ea,new ns("load",this.startLoading.bind(this)),new ns("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#u(),h(this.#l.bind(this)),h(this.#b.bind(this)),h(this.#p.bind(this)),h(this.#T.bind(this)),h(this.#w.bind(this)),h(this.#$.bind(this)),h(this.#k.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),_(t,"tabindex","0"),_(t,"role","region"),h(this.#S.bind(this)),h(this.#r.bind(this)),h(this.#o.bind(this)),Q(t,"find-media-player",this.#d.bind(this))}onConnect(t){We&&m(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");this.#h(e),e.onchange=this.#h.bind(this);const s=new ResizeObserver(vt(this.#c.bind(this)));s.observe(t),h(this.#c.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),T(()=>{s.disconnect(),e.onchange=null})}onDestroy(){this.#t.player=null,this.canPlayQueue.reset()}#n=!1;#r(){const t=this.$el,{title:e,live:s,viewType:i,providedTitle:n}=this.$state,r=s(),o=ri(i()),l=o!=="Unknown"?`${r?"Live ":""}${o}`:r?"Live":"Media",u=e();m(this.el,"aria-label",`${l} Player`+(u?` - ${u}`:"")),t?.hasAttribute("title")&&(this.#n=!0,t?.removeAttribute("title"))}#o(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),m(this.el,"data-orientation",t),this.#c()}#l(){this.$state.canPlay()&&this.#i?this.canPlayQueue.start():this.canPlayQueue.stop()}#u(){if(Mt[ue]){this.setAttributes(Mt[ue]);return}const t={"data-load":function(){return this.$props.load()},"data-captions":function(){const s=this.$state.textTrack();return!!s&&H(s)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:s,canPlay:i,waiting:n}=this.$state;return s()&&(!i()||n())},"data-error":function(){const{error:s}=this.$state;return!!s()},"data-autoplay-error":function(){const{autoPlayError:s}=this.$state;return!!s()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const s of qi){const i="data-"+(e[s]??oi(s));t[i]=function(){return this.$state[s]()}}delete t.title,Mt[ue]=t,this.setAttributes(t)}#d(t){t.detail(this)}#c(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),mt(this.el,"--player-width",t+"px"),mt(this.el,"--player-height",e+"px")}#h(t){const e=t.matches?"coarse":"fine";m(this.el,"data-pointer",e),this.$state.pointer.set(e),this.#c()}get provider(){return this.#i}get controls(){return this.#s.controls}set controls(t){this.#a.controls.set(t)}orientation;get title(){return d(this.$state.title)}set title(t){if(this.#n){this.#n=!1;return}this.#a.title.set(t)}get qualities(){return this.#t.qualities}get audioTracks(){return this.#t.audioTracks}get textTracks(){return this.#t.textTracks}get textRenderers(){return this.#t.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.#a.duration.set(t)}get paused(){return d(this.$state.paused)}set paused(t){this.#f(t)}#p(){this.#f(this.$props.paused())}#f(t){t?this.canPlayQueue.enqueue("paused",()=>this.#s.pause()):this.canPlayQueue.enqueue("paused",()=>this.#s.play())}get muted(){return d(this.$state.muted)}set muted(t){this.#g(t)}#b(){this.#g(this.$props.muted())}#g(t){this.canPlayQueue.enqueue("muted",()=>{this.#i&&this.#i.setMuted(t)})}get currentTime(){return d(this.$state.currentTime)}set currentTime(t){this.#v(t)}#w(){this.#v(this.$props.currentTime())}#v(t){this.canPlayQueue.enqueue("currentTime",()=>{const{currentTime:e}=this.$state;t!==d(e)&&d(()=>{if(!this.#i)return;const s=pe(t,this.$state);Number.isFinite(s)&&this.#i.setCurrentTime(s)})})}get volume(){return d(this.$state.volume)}set volume(t){this.#y(t)}#T(){this.#y(this.$props.volume())}#y(t){const e=he(0,t,1);this.canPlayQueue.enqueue("volume",()=>{this.#i&&this.#i.setVolume(e)})}get playbackRate(){return d(this.$state.playbackRate)}set playbackRate(t){this.#m(t)}#k(){this.#m(this.$props.playbackRate())}#m(t){this.canPlayQueue.enqueue("rate",()=>{this.#i&&this.#i.setPlaybackRate?.(t)})}#$(){this.#P(this.$props.playsInline())}#P(t){this.canPlayQueue.enqueue("playsinline",()=>{this.#i&&this.#i.setPlaysInline?.(t)})}#S(){let t=this.$props.storage(),e=w(t)?new ys:t;if(e?.onChange){const{source:s}=this.$state,i=w(t)?t:this.el?.id,n=ft(this.#x.bind(this));h(()=>e.onChange(s(),n(),i||void 0))}this.#t.storage=e,this.#t.textTracks.setStorage(e),T(()=>{e?.onDestroy?.(),this.#t.storage=null,this.#t.textTracks.setStorage(null)})}#x(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:s}=this.$state,i=s();return i.src?`${i.src}:${t()}:${e()}`:null}async play(t){return this.#s.play(t)}async pause(t){return this.#s.pause(t)}async enterFullscreen(t,e){return this.#s.enterFullscreen(t,e)}async exitFullscreen(t,e){return this.#s.exitFullscreen(t,e)}enterPictureInPicture(t){return this.#s.enterPictureInPicture(t)}exitPictureInPicture(t){return this.#s.exitPictureInPicture(t)}seekToLiveEdge(t){this.#s.seekToLiveEdge(t)}startLoading(t){this.#t.notify("can-load",void 0,t)}startLoadingPoster(t){this.#t.notify("can-load-poster",void 0,t)}requestAirPlay(t){return this.#s.requestAirPlay(t)}requestGoogleCast(t){return this.#s.requestGoogleCast(t)}setAudioGain(t,e){return this.#s.setAudioGain(t,e)}destroy(){super.destroy(),this.#t.remote.setPlayer(null),this.dispatch("destroy")}}const C=Mt.prototype;P(C,"canPlayQueue"),P(C,"remoteControl"),P(C,"provider"),P(C,"controls"),P(C,"orientation"),P(C,"title"),P(C,"qualities"),P(C,"audioTracks"),P(C,"textTracks"),P(C,"textRenderers"),P(C,"duration"),P(C,"paused"),P(C,"muted"),P(C,"currentTime"),P(C,"volume"),P(C,"playbackRate"),V(C,"play"),V(C,"pause"),V(C,"enterFullscreen"),V(C,"exitFullscreen"),V(C,"enterPictureInPicture"),V(C,"exitPictureInPicture"),V(C,"seekToLiveEdge"),V(C,"startLoading"),V(C,"startLoadingPoster"),V(C,"requestAirPlay"),V(C,"requestGoogleCast"),V(C,"setAudioGain");class ia extends A(HTMLElement,Mt){static tagName="media-player";static attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}}class aa{name="audio";target;canPlay(t){return ki(t)?!w(t.src)||t.type==="?"||Pi(this.target,t.type):!1}mediaType(){return"audio"}async load(t){return new(await import("../providers/vidstack-audio-DDq1JONx.js")).AudioProvider(this.target,t)}}class we{name="video";target;canPlay(t){return Si(t)?!w(t.src)||t.type==="?"||je(this.target,t.type):!1}mediaType(){return"video"}async load(t){return new(await import("../providers/vidstack-video-DA7L8T3B.js")).VideoProvider(this.target,t)}}class Ie extends we{static supported=xi();name="dash";canPlay(t){return Ie.supported&&re(t)}async load(t){return new(await import("../providers/vidstack-dash-DIrraAo7.js")).DASHProvider(this.target,t)}}class De extends we{static supported=ze();name="hls";canPlay(t){return De.supported&&oe(t)}async load(t){return new(await import("../providers/vidstack-hls-C2rAmyZa.js")).HLSProvider(this.target,t)}}class na{name="vimeo";target;preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const e of t)qt(e)}canPlay(t){return w(t.src)&&t.type==="video/vimeo"}mediaType(){return"video"}async load(t){return new(await import("../providers/vidstack-vimeo-CdmoHNLt.js")).VimeoProvider(this.target,t)}async loadPoster(t,e,s){const{resolveVimeoVideoId:i,getVimeoVideoInfo:n}=await import("./vidstack-2f5gzOW6.js");if(!w(t.src))return null;const{videoId:r,hash:o}=i(t.src);return r?n(r,s,o).then(l=>l?l.poster:null):null}}class ra{name="youtube";target;preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const e of t)qt(e)}canPlay(t){return w(t.src)&&t.type==="video/youtube"}mediaType(){return"video"}async load(t){return new(await import("../providers/vidstack-youtube-DZHsiUG0.js")).YouTubeProvider(this.target,t)}async loadPoster(t,e,s){const{findYouTubePoster:i,resolveYouTubeVideoId:n}=await import("./vidstack-DDBvyCKL.js"),r=w(t.src)&&n(t.src);return r?i(r,s):null}}function oa(a,t){return fetch(a,t).then(e=>e.text()).then(e=>/type="static"/.test(e)?"on-demand":"live")}function Ps(a,t){return fetch(a,t).then(e=>e.text()).then(e=>{const s=la(e);if(s)return Ps(/^https?:/.test(s)?s:new URL(s,a).href,t);const i=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(e)?"on-demand":"live";return i==="live"&&ha(e)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(e)||e.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":i})}function la(a){const t=a.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function ha(a){const t=a.split(`
`);for(const e of t)if(e.startsWith("#EXT-X-TARGETDURATION")){const s=parseFloat(e.split(":")[1]);if(!isNaN(s))return s}return-1}const $e=new Map;class ua{#t=!1;#e;#s;#i;#a;constructor(t,e,s,i=[]){this.#s=t,this.#i=e,this.#a=s;const n=new Ie,r=new De,o=new we,l=new aa,u=new ra,c=new na,p=[u,c];this.#e=ft(()=>{const g=e.$state.remotePlaybackLoader(),y=e.$props.preferNativeHLS()?[o,l,n,r,...p,...i]:[r,o,l,n,...p,...i];return g?[g,...y]:y});const{$state:f}=e;f.sources.set(Ss(e.$props.src()));for(const g of f.sources()){const y=this.#e().find(R=>R.canPlay(g));if(!y)continue;const D=y.mediaType(g);e.$state.source.set(g),e.$state.mediaType.set(D),e.$state.inferredViewType.set(D),this.#a.set(y),this.#t=!0;break}}connect(){const t=this.#a();this.#t&&(this.#l(this.#i.$state.source(),t),this.#u(t),this.#t=!1),h(this.#n.bind(this)),h(this.#r.bind(this)),h(this.#d.bind(this)),h(this.#c.bind(this)),h(this.#h.bind(this))}#n(){this.#i.notify("sources-change",[...Ss(this.#i.$props.src()),...this.#s()])}#r(){const{$state:t}=this.#i,e=t.sources(),s=d(t.source),i=this.#o(s,e);if(e[0]?.src&&!i.src&&!i.type){const{crossOrigin:r}=t,o=Ut(r()),l=new AbortController;return Promise.all(e.map(u=>w(u.src)&&u.type==="?"?fetch(u.src,{method:"HEAD",credentials:o,signal:l.signal}).then(c=>(u.type=c.headers.get("content-type")||"??",$e.set(u.src,u.type),u)).catch(()=>u):u)).then(u=>{if(l.signal.aborted)return;const c=this.#o(d(t.source),u);pt(),c.src||this.#i.notify("error",{message:"Failed to load resource.",code:4})}),()=>l.abort()}pt()}#o(t,e){let s={src:"",type:""},i=null,n=new O("sources-change",{detail:{sources:e}}),r=this.#e(),{started:o,paused:l,currentTime:u,quality:c,savedState:p}=this.#i.$state;for(const f of e){const g=r.find(y=>y.canPlay(f));if(g){s=f,i=g;break}}if(jt(s)){const f=c(),g=e.find(y=>y.src===f?.src);d(o)?p.set({paused:d(l),currentTime:d(u)}):p.set(null),g&&(s=g,n=new O("quality-change",{detail:{quality:f}}))}return Es(t,s)||this.#l(s,i,n),i!==d(this.#a)&&this.#u(i,n),s}#l(t,e,s){this.#i.notify("source-change",t,s),this.#i.notify("media-type-change",e?.mediaType(t)||"unknown",s)}#u(t,e){this.#i.$providerSetup.set(!1),this.#i.notify("provider-change",null,e),t&&d(()=>t.preconnect?.(this.#i)),this.#a.set(t),this.#i.notify("provider-loader-change",t,e)}#d(){const t=this.#i.$provider();if(!(!t||d(this.#i.$providerSetup))){if(this.#i.$state.canLoad()){ae(()=>t.setup(),t.scope),this.#i.$providerSetup.set(!0);return}d(()=>t.preconnect?.())}}#c(){if(!this.#i.$providerSetup())return;const t=this.#i.$provider(),e=this.#i.$state.source(),s=d(this.#i.$state.crossOrigin),i=d(this.#i.$props.preferNativeHLS);if(!Es(t?.currentSrc,e)){if(this.#i.$state.canLoad()){const n=new AbortController;return oe(e)?(i||!ze())&&Ps(e.src,{credentials:Ut(s),signal:n.signal}).then(r=>{this.#i.notify("stream-type-change",r)}).catch(He):re(e)?oa(e.src,{credentials:Ut(s),signal:n.signal}).then(r=>{this.#i.notify("stream-type-change",r)}).catch(He):this.#i.notify("stream-type-change","on-demand"),d(()=>{const r=d(this.#i.$state.preload);return t?.loadSource(e,r).catch(o=>{})}),()=>n.abort()}try{w(e.src)&&qt(new URL(e.src).origin)}catch{}}}#h(){const t=this.#a(),{providedPoster:e,source:s,canLoadPoster:i}=this.#i.$state;if(!t||!t.loadPoster||!s()||!i()||e())return;const n=new AbortController,r=new O("source-change",{detail:s});return t.loadPoster(s(),this.#i,n).then(o=>{this.#i.notify("poster-change",o||"",r)}).catch(()=>{this.#i.notify("poster-change","",r)}),()=>{n.abort()}}}function Ss(a){return(X(a)?a:[a]).map(t=>w(t)?{src:t,type:xs(t)}:{...t,type:xs(t.src,t.type)})}function xs(a,t){return w(t)&&t.length?t:w(a)&&$e.has(a)?$e.get(a):!t&&oe({src:a,type:""})?"application/x-mpegurl":!t&&re({src:a,type:""})?"application/dash+xml":!w(a)||a.startsWith("blob:")?"video/object":a.includes("youtube")||a.includes("youtu.be")?"video/youtube":a.includes("vimeo")&&!a.includes("progressive_redirect")&&!a.includes(".m3u8")?"video/vimeo":"?"}function Es(a,t){return a?.src===t?.src&&a?.type===t?.type}class ca{#t;#e;#s=[];constructor(t,e){this.#t=t,this.#e=e,h(this.#i.bind(this))}#i(){const t=this.#t();for(const e of this.#s)if(!t.some(s=>s.id===e.id)){const s=e.id&&this.#e.textTracks.getById(e.id);s&&this.#e.textTracks.remove(s)}for(const e of t){const s=e.id||Kt.createId(e);this.#e.textTracks.getById(s)||(e.id=s,this.#e.textTracks.add(e))}this.#s=t}}class Cs extends x{static props={loaders:[]};static state=new St({loader:null});#t;#e;#s=v([]);#i=v([]);#a=null;onSetup(){this.#t=$(),this.#e=new ua(this.#s,this.#t,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.#e.connect(),new ca(this.#i,this.#t);const e=new ResizeObserver(vt(this.#l.bind(this)));e.observe(t);const s=new MutationObserver(this.#u.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.#l(),this.#u(),T(()=>{e.disconnect(),s.disconnect()})}#n=-1;load(t){t?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#n),this.#n=requestAnimationFrame(()=>this.#r(t)),T(()=>{window.cancelAnimationFrame(this.#n)})}#r(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.#t;this.#a===e&&e?.target===t&&d(s)||(this.#o(),this.#a=e,e&&(e.target=t||null),!(!e||!t)&&e.load(this.#t).then(i=>{this.scope&&d(this.$state.loader)===e&&this.#t.notify("provider-change",i)}))}onDestroy(){this.#a=null,this.#o()}#o(){this.#t?.notify("provider-change",null)}#l(){if(!this.el)return;const{player:t,$state:e}=this.#t,s=this.el.offsetWidth,i=this.el.offsetHeight;t&&(e.mediaWidth.set(s),e.mediaHeight.set(i),t.el&&(mt(t.el,"--media-width",s+"px"),mt(t.el,"--media-height",i+"px")))}#u(){const t=[],e=[],s=this.el.children;for(const i of s)if(!i.hasAttribute("data-vds")){if(i instanceof HTMLSourceElement){const n={id:i.id,src:i.src,type:i.type};for(const r of["id","src","width","height","bitrate","codec"]){const o=i.getAttribute(`data-${r}`);w(o)&&(n[r]=/id|src|codec/.test(r)?o:Number(o))}t.push(n)}else if(i instanceof HTMLTrackElement){const n={src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")};e.push({id:i.id||Kt.createId(n),...n})}}this.#s.set(t),this.#i.set(e),pt()}}const da=Cs.prototype;V(da,"load");class pa extends A(HTMLElement,Cs){static tagName="media-provider";#t;#e=null;#s=null;onSetup(){this.#t=$(),this.setAttribute("keep-alive","")}onDestroy(){this.#s?.remove(),this.#s=null,this.#e?.remove(),this.#e=null}onConnect(){h(()=>{const t=this.$state.loader(),e=t?.name==="youtube",s=t?.name==="vimeo",i=e||s,n=t?.name==="google-cast",r=t?n?this.#r():i?this.#n():t.mediaType()==="audio"?this.#i():this.#a():null;if(this.#e!==r){const o=this.#e?.parentElement??this;this.#e?.remove(),this.#e=r,r&&o.prepend(r),i&&r&&h(()=>{const{nativeControls:l,viewType:u}=this.#t.$state,c=l(),p=u()==="audio";!c&&!p?(this.#s=this.querySelector(".vds-blocker"),this.#s||(this.#s=document.createElement("div"),this.#s.classList.add("vds-blocker"),r.after(this.#s))):(this.#s?.remove(),this.#s=null),m(r,"data-no-controls",!c)})}e?r?.classList.add("vds-youtube"):s&&r?.classList.add("vds-vimeo"),i||(this.#s?.remove(),this.#s=null),this.load(r)})}#i(){const t=this.#e instanceof HTMLAudioElement?this.#e:document.createElement("audio"),{controls:e,crossOrigin:s}=this.#t.$state;return h(()=>{m(t,"controls",e()),m(t,"crossorigin",s())}),t}#a(){const t=this.#e instanceof HTMLVideoElement?this.#e:document.createElement("video"),{crossOrigin:e,poster:s,nativeControls:i}=this.#t.$state,n=ft(()=>i()?"true":null),r=ft(()=>s()&&i()?s():null);return h(()=>{m(t,"controls",n()),m(t,"crossorigin",e()),m(t,"poster",r())}),t}#n(){const t=this.#e instanceof HTMLIFrameElement?this.#e:document.createElement("iframe"),{nativeControls:e}=this.#t.$state;return h(()=>m(t,"tabindex",e()?null:-1)),t}#r(){if(this.#e?.classList.contains("vds-google-cast"))return this.#e;const t=document.createElement("div");return t.classList.add("vds-google-cast"),import("./vidstack-BuZ_87JM.js").then(({insertContent:e})=>{e(t,this.#t.$state)}),t}}E(ia),E(pa);function ma(a){return a?"true":"false"}function tt(a){return()=>ma(a())}class As extends Y{#t;constructor(t){super(),this.#t=t}onAttach(t){const{$props:e,ariaKeys:s}=$(),i=t.getAttribute("aria-keyshortcuts");if(i){s[this.#t]=i,T(()=>{delete s[this.#t]});return}const n=e.keyShortcuts()[this.#t];if(n){const r=X(n)?n.join(" "):w(n)?n:n?.keys;t.setAttribute("aria-keyshortcuts",X(r)?r.join(" "):r)}}}class j extends Y{static props={disabled:!1};#t;constructor(t){super(),this.#t=t,new yt,t.keyShortcut&&new As(t.keyShortcut)}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.#t.isPresssed,"aria-pressed":this.#e.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){_(t,"tabindex","0"),_(t,"role","button"),_(t,"type","button")}onConnect(t){const e=gt(t,this.#i.bind(this));for(const s of["click","touchstart"])e.add(s,this.#a.bind(this),{passive:!0})}#e(){return Ht(this.#t.isPresssed())}#s(t){li(this.#t.isPresssed)&&this.#t.isPresssed.set(e=>!e)}#i(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.#t.onPress??this.#s).call(this,t)}#a(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}let fa=class extends x{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#s.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=$();const{canAirPlay:t,isAirPlayConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#i.bind(this),"aria-hidden":tt(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),Pt(t,this.#a.bind(this))}#e(t){this.#t.remote.requestAirPlay(t)}#s(){const{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()!=="disconnected"}#i(){const{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()}#a(){const{remotePlaybackState:t}=this.#t.$state;return`AirPlay ${t()}`}};class ga extends A(HTMLElement,fa){static tagName="media-airplay-button"}class ya extends x{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#s.bind(this),keyShortcut:"toggleCaptions",onPress:this.#e.bind(this)})}onSetup(){this.#t=$(),this.setAttributes({"data-active":this.#s.bind(this),"data-supported":()=>!this.#i(),"aria-hidden":tt(this.#i.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),Pt(t,"Captions")}#e(t){this.#t.remote.toggleCaptions(t)}#s(){const{textTrack:t}=this.#t.$state,e=t();return!!e&&H(e)}#i(){const{hasCaptions:t}=this.#t.$state;return!t()}}class ba extends A(HTMLElement,ya){static tagName="media-caption-button"}let wa=class extends x{static props={...j.props,target:"prefer-media"};#t;constructor(){super(),new j({isPresssed:this.#s.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#e.bind(this)})}onSetup(){this.#t=$();const{fullscreen:t}=this.#t.$state,e=this.#i.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":tt(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),Pt(t,"Fullscreen")}#e(t){const e=this.#t.remote,s=this.$props.target();this.#s()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}#s(){const{fullscreen:t}=this.#t.$state;return t()}#i(){const{canFullscreen:t}=this.#t.$state;return t()}};class $a extends A(HTMLElement,wa){static tagName="media-fullscreen-button"}class va extends x{static props={disabled:!1};#t;constructor(){super(),new yt}onSetup(){this.#t=$();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.#t.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":tt(()=>t()||s()),"aria-hidden":tt(i)})}onAttach(t){_(t,"tabindex","0"),_(t,"role","button"),_(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){gt(t,this.#e.bind(this))}#e(t){const{disabled:e}=this.$props,{liveEdge:s}=this.#t.$state;e()||s()||this.#t.remote.seekToLiveEdge(t)}}class Ta extends A(HTMLElement,va){static tagName="media-live-button"}let ka=class extends x{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#s.bind(this),keyShortcut:"toggleMuted",onPress:this.#e.bind(this)})}onSetup(){this.#t=$(),this.setAttributes({"data-muted":this.#s.bind(this),"data-state":this.#i.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),Pt(t,"Mute")}#e(t){const e=this.#t.remote;this.#s()?e.unmute(t):e.mute(t)}#s(){const{muted:t,volume:e}=this.#t.$state;return t()||e()===0}#i(){const{muted:t,volume:e}=this.#t.$state,s=e();if(t()||s===0)return"muted";if(s>=.5)return"high";if(s<.5)return"low"}};class Pa extends A(HTMLElement,ka){static tagName="media-mute-button"}let Sa=class extends x{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#s.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#e.bind(this)})}onSetup(){this.#t=$();const{pictureInPicture:t}=this.#t.$state,e=this.#i.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":tt(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),Pt(t,"PiP")}#e(t){const e=this.#t.remote;this.#s()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}#s(){const{pictureInPicture:t}=this.#t.$state;return t()}#i(){const{canPictureInPicture:t}=this.#t.$state;return t()}};class xa extends A(HTMLElement,Sa){static tagName="media-pip-button"}let Ea=class extends x{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#s.bind(this),keyShortcut:"togglePaused",onPress:this.#e.bind(this)})}onSetup(){this.#t=$();const{paused:t,ended:e}=this.#t.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),Pt(t,"Play")}#e(t){const e=this.#t.remote;this.#s()?e.pause(t):e.play(t)}#s(){const{paused:t}=this.#t.$state;return!t()}};class Ca extends A(HTMLElement,Ea){static tagName="media-play-button"}class Aa extends x{static props={disabled:!1,seconds:30};#t;constructor(){super(),new yt}onSetup(){this.#t=$();const{seeking:t}=this.#t.$state,{seconds:e}=this.$props,s=this.#e.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":tt(()=>!s())})}onAttach(t){_(t,"tabindex","0"),_(t,"role","button"),_(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),Pt(t,this.#s.bind(this))}onConnect(t){gt(t,this.#i.bind(this))}#e(){const{canSeek:t}=this.#t.$state;return t()}#s(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}#i(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.#t.$state,n=i()+e();this.#t.remote.seek(n,t)}}class Ma extends A(HTMLElement,Aa){static tagName="media-seek-button"}const Ms=dt();function M(){return F(Ms)}const La={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};class qa extends x{static props=La;#t;onSetup(){this.#t=$(),st(Ms,{...this.$props,previewTime:v(0)})}}function _a(a,t){const{canAirPlay:e,canFullscreen:s,canPictureInPicture:i,controlsHidden:n,currentTime:r,fullscreen:o,hasCaptions:l,isAirPlayConnected:u,paused:c,pictureInPicture:p,playing:f,pointer:g,poster:y,textTrack:D,viewType:R,waiting:z}=t.$state;a.classList.add("plyr"),a.classList.add("plyr--full-ui");const ut={"plyr--airplay-active":u,"plyr--airplay-supported":e,"plyr--fullscreen-active":o,"plyr--fullscreen-enabled":s,"plyr--hide-controls":n,"plyr--is-touch":()=>g()==="coarse","plyr--loading":z,"plyr--paused":c,"plyr--pip-active":p,"plyr--pip-enabled":i,"plyr--playing":f,"plyr__poster-enabled":y,"plyr--stopped":()=>c()&&r()===0,"plyr--captions-active":D,"plyr--captions-enabled":l},at=Be();for(const et of Object.keys(ut))at.add(h(()=>void a.classList.toggle(et,!!ut[et]())));return at.add(h(()=>{const et=`plyr--${R()}`;return a.classList.add(et),()=>a.classList.remove(et)}),h(()=>{const{$provider:et}=t,nt=et()?.type,ct=`plyr--${Ia(nt)?"html5":nt}`;return a.classList.toggle(ct,!!nt),()=>a.classList.remove(ct)})),()=>at.empty()}function Ia(a){return a==="audio"||a==="video"}class Da extends ui{#t=null;#e=!1;#s=null;constructor(t){super(t),this.#e=t.type===Ge.ATTRIBUTE||t.type===Ge.BOOLEAN_ATTRIBUTE}render(t){return t!==this.#t&&(this.disconnected(),this.#t=t,this.isConnected&&this.#i()),this.#t?this.#a(d(this.#t)):ci}reconnected(){this.#i()}disconnected(){this.#s?.(),this.#s=null}#i(){this.#t&&(this.#s=h(this.#r.bind(this)))}#a(t){return this.#e?Ke(t):t}#n(t){this.setValue(this.#a(t))}#r(){this.#n(this.#t?.())}}function S(a){return hi(Da)(ft(a))}class Va extends HTMLElement{rootPart=null;connectedCallback(){this.rootPart=Bt(this.render(),this,{renderBefore:this.firstChild}),this.rootPart.setConnected(!0)}disconnectedCallback(){this.rootPart?.setConnected(!1),this.rootPart=null,Bt(null,this)}}class Ls{#t;#e;elements=new Set;constructor(t,e){this.#t=t,this.#e=e}connect(){this.#i();const t=new MutationObserver(this.#s);for(const e of this.#t)t.observe(e,{childList:!0,subtree:!0});T(()=>t.disconnect()),T(this.disconnect.bind(this))}disconnect(){this.elements.clear()}assign(t,e){Fe(t)?(e.textContent="",e.append(t)):(Bt(null,e),Bt(t,e)),e.style.display||(e.style.display="contents");const s=e.firstElementChild;if(!s)return;const i=e.getAttribute("data-class");i&&s.classList.add(...i.split(" "))}#s=vt(this.#i.bind(this));#i(t){if(t&&!t.some(i=>i.addedNodes.length))return;let e=!1,s=this.#t.flatMap(i=>[...i.querySelectorAll("slot")]);for(const i of s)!i.hasAttribute("name")||this.elements.has(i)||(this.elements.add(i),e=!0);e&&this.#e(this.elements)}}let Ra=0,Yt="data-slot-id";class Oa{#t;slots;constructor(t){this.#t=t,this.slots=new Ls(t,this.#s.bind(this))}connect(){this.slots.connect(),this.#s();const t=new MutationObserver(this.#e);for(const e of this.#t)t.observe(e,{childList:!0});T(()=>t.disconnect())}#e=vt(this.#s.bind(this));#s(){for(const t of this.#t)for(const e of t.children){if(e.nodeType!==1)continue;const s=e.getAttribute("slot");if(!s)continue;e.style.display="none";let i=e.getAttribute(Yt);i||e.setAttribute(Yt,i=++Ra+"");for(const n of this.slots.elements){if(n.getAttribute("name")!==s||n.getAttribute(Yt)===i)continue;const r=document.importNode(e,!0);s.includes("-icon")&&r.classList.add("vds-icon"),r.style.display="",r.removeAttribute("slot"),this.slots.assign(r,n),n.setAttribute(Yt,i)}}}}function Fa({name:a,class:t,state:e,paths:s,viewBox:i="0 0 32 32"}){return b`<svg
    class="${"vds-icon"+(t?` ${t}`:"")}"
    viewBox="${i}"
    fill="none"
    aria-hidden="true"
    focusable="false"
    xmlns="http://www.w3.org/2000/svg"
    data-icon=${Ke(a??e)}
  >
    ${w(s)?di(s):S(s)}
  </svg>`}class Na{#t={};#e=!1;slots;constructor(t){this.slots=new Ls(t,this.#i.bind(this))}connect(){this.slots.connect()}load(){this.loadIcons().then(t=>{this.#t=t,this.#e=!0,this.#i()})}*#s(){for(const t of Object.keys(this.#t)){const e=`${t}-icon`;for(const s of this.slots.elements)s.name===e&&(yield{icon:this.#t[t],slot:s})}}#i(){if(this.#e)for(const{icon:t,slot:e}of this.#s())this.slots.assign(t,e)}}class Ha extends Na{connect(){super.connect();const{player:t}=$();if(!t.el)return;let e,s=new IntersectionObserver(i=>{i[0]?.isIntersecting&&(e?.(),e=void 0,this.load())});s.observe(t.el),e=T(()=>s.disconnect())}}class Ba extends Ha{async loadIcons(){const t=(await import("./vidstack-Dge3KT8k.js")).icons,e={};for(const s of Object.keys(t))e[s]=Fa({name:s,paths:t[s],viewBox:"0 0 18 18"});return e}}function Xt(a,t){return a()?.[t]??t}function Ga(){return Wa()}function Ka(){const a=$(),{load:t}=a.$props,{canLoad:e}=a.$state;return ft(()=>t()==="play"&&!e())()?[qs(),_s()]:[Ua(),Qa(),_s(),ja(),un(),cn()]}function qs(){const a=$(),{translations:t}=M(),{title:e}=a.$state,s=S(()=>`${Xt(t,"Play")}, ${e()}`);return b`
    <media-play-button
      class="plyr__control plyr__control--overlaid"
      aria-label=${s}
      data-plyr="play"
    >
      <slot name="play-icon"></slot>
    </button>
  `}function Ua(){const{controls:a}=M();return S(()=>a().includes("play-large")?qs():null)}function Qa(){const{thumbnails:a,previewTime:t}=M();return b`
    <media-thumbnail
      .src=${S(a)}
      class="plyr__preview-scrubbing"
      time=${S(()=>t())}
    ></media-thumbnail>
  `}function _s(){const a=$(),{poster:t}=a.$state,e=S(()=>`background-image: url("${t()}");`);return b`<div class="plyr__poster" style=${e}></div>`}function Wa(){const a=new Set(["captions","pip","airplay","fullscreen"]),{controls:t}=M(),e=S(()=>t().filter(s=>!a.has(s)).map(Is));return b`<div class="plyr__controls">${e}</div>`}function ja(){const{controls:a}=M(),t=S(()=>a().map(Is));return b`<div class="plyr__controls">${t}</div>`}function Is(a){switch(a){case"airplay":return za();case"captions":return Ya();case"current-time":return ln();case"download":return hn();case"duration":return Ds();case"fast-forward":return an();case"fullscreen":return Xa();case"mute":case"volume":case"mute+volume":return rn(a);case"pip":return Za();case"play":return tn();case"progress":return nn();case"restart":return en();case"rewind":return sn();case"settings":return dn();default:return null}}function za(){const{translations:a}=M();return b`
    <media-airplay-button class="plyr__controls__item plyr__control" data-plyr="airplay">
      <slot name="airplay-icon"></slot>
      <span class="plyr__tooltip">${L(a,"AirPlay")}</span>
    </media-airplay-button>
  `}function Ya(){const{translations:a}=M(),t=L(a,"Disable captions"),e=L(a,"Enable captions");return b`
    <media-caption-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="captions"
    >
      <slot name="captions-on-icon" data-class="icon--pressed"></slot>
      <slot name="captions-off-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-caption-button>
  `}function Xa(){const{translations:a}=M(),t=L(a,"Enter Fullscreen"),e=L(a,"Exit Fullscreen");return b`
    <media-fullscreen-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="fullscreen"
    >
      <slot name="enter-fullscreen-icon" data-class="icon--pressed"></slot>
      <slot name="exit-fullscreen-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-fullscreen-button>
  `}function Ja(){const{translations:a}=M(),t=L(a,"Mute"),e=L(a,"Unmute");return b`
    <media-mute-button class="plyr__control" data-no-label data-plyr="mute">
      <slot name="muted-icon" data-class="icon--pressed"></slot>
      <slot name="volume-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-mute-button>
  `}function Za(){const{translations:a}=M(),t=L(a,"Enter PiP"),e=L(a,"Exit PiP");return b`
    <media-pip-button class="plyr__controls__item plyr__control" data-no-label data-plyr="pip">
      <slot name="pip-icon"></slot>
      <slot name="enter-pip-icon" data-class="icon--pressed"></slot>
      <slot name="exit-pip-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-pip-button>
  `}function tn(){const{translations:a}=M(),t=L(a,"Play"),e=L(a,"Pause");return b`
    <media-play-button class="plyr__controls__item plyr__control" data-no-label data-plyr="play">
      <slot name="pause-icon" data-class="icon--pressed"></slot>
      <slot name="play-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-play-button>
  `}function en(){const{translations:a}=M(),{remote:t}=$(),e=L(a,"Restart");function s(i){Nt(i)&&!Ot(i)||t.seek(0,i)}return b`
    <button
      type="button"
      class="plyr__control"
      data-plyr="restart"
      @pointerup=${s}
      @keydown=${s}
    >
      <slot name="restart-icon"></slot>
      <span class="plyr__tooltip">${e}</span>
    </button>
  `}function sn(){const{translations:a,seekTime:t}=M(),e=S(()=>`${Xt(a,"Rewind")} ${t()}s`),s=S(()=>-1*t());return b`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${s}
      data-no-label
      data-plyr="rewind"
    >
      <slot name="rewind-icon"></slot>
      <span class="plyr__tooltip">${e}</span>
    </media-seek-button>
  `}function an(){const{translations:a,seekTime:t}=M(),e=S(()=>`${Xt(a,"Forward")} ${t()}s`),s=S(t);return b`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${s}
      data-no-label
      data-plyr="fast-forward"
    >
      <slot name="fast-forward-icon"></slot>
      <span class="plyr__tooltip">${e}</span>
    </media-seek-button>
  `}function nn(){let a=$(),{duration:t,viewType:e}=a.$state,{translations:s,markers:i,thumbnails:n,seekTime:r,previewTime:o}=M(),l=L(s,"Seek"),u=v(null),c=S(()=>{const R=u();return R?b`<span class="plyr__progress__marker-label">${Ue(R.label)}<br /></span>`:null});function p(R){o.set(R.detail)}function f(){u.set(this)}function g(){u.set(null)}function y(){const R=n(),z=S(()=>e()==="audio");return R?b`
          <media-slider-preview class="plyr__slider__preview" ?no-clamp=${z}>
            <media-slider-thumbnail .src=${R} class="plyr__slider__preview__thumbnail">
              <span class="plyr__slider__preview__time-container">
                ${c}
                <media-slider-value class="plyr__slider__preview__time"></media-slider-value>
              </span>
            </media-slider-thumbnail>
          </media-slider-preview>
        `:b`
          <span class="plyr__tooltip">
            ${c}
            <media-slider-value></media-slider-value>
          </span>
        `}function D(){const R=t();return Number.isFinite(R)?i()?.map(z=>b`
        <span
          class="plyr__progress__marker"
          @mouseenter=${f.bind(z)}
          @mouseleave=${g}
          style=${`left: ${z.time/R*100}%;`}
        ></span>
      `):null}return b`
    <div class="plyr__controls__item plyr__progress__container">
      <div class="plyr__progress">
        <media-time-slider
          class="plyr__slider"
          data-plyr="seek"
          pause-while-dragging
          key-step=${S(r)}
          aria-label=${l}
          @media-seeking-request=${p}
        >
          <div class="plyr__slider__track"></div>
          <div class="plyr__slider__thumb"></div>
          <div class="plyr__slider__buffer"></div>
          ${S(y)}${S(D)}
        </media-time-slider>
      </div>
    </div>
  `}function rn(a){return S(()=>{const t=a==="mute"||a==="mute+volume",e=a==="volume"||a==="mute+volume";return b`
      <div class="plyr__controls__item plyr__volume">
        ${[t?Ja():null,e?on():null]}
      </div>
    `})}function on(){const{translations:a}=M(),t=L(a,"Volume");return b`
    <media-volume-slider class="plyr__slider" data-plyr="volume" aria-label=${t}>
      <div class="plyr__slider__track"></div>
      <div class="plyr__slider__thumb"></div>
    </media-volume-slider>
  `}function ln(){const a=$(),{translations:t,invertTime:e,toggleTime:s,displayDuration:i}=M(),n=v(d(e));function r(l){!s()||i()||Nt(l)&&!Ot(l)||n.set(u=>!u)}function o(){return S(()=>i()?Ds():null)}return S(()=>{const{streamType:l}=a.$state,u=L(t,"LIVE"),c=L(t,"Current time"),p=S(()=>!i()&&n());return l()==="live"||l()==="ll-live"?b`
          <media-live-button
            class="plyr__controls__item plyr__control plyr__live-button"
            data-plyr="live"
          >
            <span class="plyr__live-button__text">${u}</span>
          </media-live-button>
        `:b`
          <media-time
            type="current"
            class="plyr__controls__item plyr__time plyr__time--current"
            tabindex="0"
            role="timer"
            aria-label=${c}
            ?remainder=${p}
            @pointerup=${r}
            @keydown=${r}
          ></media-time>
          ${o()}
        `})}function Ds(){const{translations:a}=M(),t=L(a,"Duration");return b`
    <media-time
      type="duration"
      class="plyr__controls__item plyr__time plyr__time--duration"
      role="timer"
      tabindex="0"
      aria-label=${t}
    ></media-time>
  `}function hn(){return S(()=>{const a=$(),{translations:t,download:e}=M(),{title:s,source:i}=a.$state,n=i(),r=e(),o=Ai({title:s(),src:n,download:r}),l=L(t,"Download");return w(o?.url)?b`
          <a
            class="plyr__controls__item plyr__control"
            href=${Mi(o.url,{download:o.name})}
            download=${o.name}
            target="_blank"
          >
            <slot name="download-icon" />
            <span class="plyr__tooltip">${l}</span>
          </a>
        `:null})}function un(){return S(()=>{const{clickToPlay:a,clickToFullscreen:t}=M();return[a()?b`
            <media-gesture
              class="plyr__gesture"
              event="pointerup"
              action="toggle:paused"
            ></media-gesture>
          `:null,t()?b`
            <media-gesture
              class="plyr__gesture"
              event="dblpointerup"
              action="toggle:fullscreen"
            ></media-gesture>
          `:null]})}function cn(){const a=$(),t=v(void 0),e=S(()=>Ue(t()?.text));return h(()=>{const s=a.$state.textTrack();if(!s)return;function i(){t.set(s?.activeCues[0])}return i(),Q(s,"cue-change",i)}),b`
    <div class="plyr__captions" dir="auto">
      <span class="plyr__caption">${e}</span>
    </div>
  `}function dn(){const{translations:a}=M(),t=L(a,"Settings");return b`
    <div class="plyr__controls__item plyr__menu">
      <media-menu>
        <media-menu-button class="plyr__control" data-plyr="settings">
          <slot name="settings-icon" />
          <span class="plyr__tooltip">${t}</span>
        </media-menu-button>
        <media-menu-items class="plyr__menu__container" placement="top end">
          <div><div>${[mn(),bn(),$n(),gn()]}</div></div>
        </media-menu-items>
      </media-menu>
    </div>
  `}function Jt({label:a,children:t}){const e=v(!1);return b`
    <media-menu @open=${()=>e.set(!0)} @close=${()=>e.set(!1)}>
      ${pn({label:a,open:e})}
      <media-menu-items>${t}</media-menu-items>
    </media-menu>
  `}function pn({open:a,label:t}){const{translations:e}=M(),s=S(()=>`plyr__control plyr__control--${a()?"back":"forward"}`);function i(){const n=L(e,"Go back to previous menu");return S(()=>a()?b`<span class="plyr__sr-only">${n}</span>`:null)}return b`
    <media-menu-button class=${s} data-plyr="settings">
      <span class="plyr__menu__label" aria-hidden=${Tn(a)}>
        ${L(e,t)}
      </span>
      <span class="plyr__menu__value" data-part="hint"></span>
      ${i()}
    </media-menu-button>
  `}function mn(){return Jt({label:"Audio",children:fn()})}function fn(){const{translations:a}=M();return b`
    <media-audio-radio-group empty-label=${L(a,"Default")}>
      <template>
        <media-radio class="plyr__control" data-plyr="audio">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-audio-radio-group>
  `}function gn(){return Jt({label:"Speed",children:yn()})}function yn(){const{translations:a,speed:t}=M();return b`
    <media-speed-radio-group .rates=${t} normal-label=${L(a,"Normal")}>
      <template>
        <media-radio class="plyr__control" data-plyr="speed">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-speed-radio-group>
  `}function bn(){return Jt({label:"Captions",children:wn()})}function wn(){const{translations:a}=M();return b`
    <media-captions-radio-group off-label=${L(a,"Disabled")}>
      <template>
        <media-radio class="plyr__control" data-plyr="captions">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-captions-radio-group>
  `}function $n(){return Jt({label:"Quality",children:vn()})}function vn(){const{translations:a}=M();return b`
    <media-quality-radio-group auto-label=${L(a,"Auto")}>
      <template>
        <media-radio class="plyr__control" data-plyr="quality">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-quality-radio-group>
  `}function Tn(a){return S(()=>a()?"true":"false")}function L(a,t){return S(()=>Xt(a,t))}class kn extends A(Va,qa){static tagName="media-plyr-layout";#t;onSetup(){this.forwardKeepAlive=!1,this.#t=$()}onConnect(){this.#t.player.el?.setAttribute("data-layout","plyr"),T(()=>this.#t.player.el?.removeAttribute("data-layout")),_a(this,this.#t),h(()=>{this.$props.customIcons()?new Oa([this]).connect():new Ba([this]).connect()})}render(){return S(this.#e.bind(this))}#e(){const{viewType:t}=this.#t.$state;return t()==="audio"?Ga():t()==="video"?Ka():null}}const B=dt(),ve=dt();class Zt extends Y{#t=new Set;#e=v("");#s=null;onValueChange;get values(){return Array.from(this.#t).map(t=>t.value())}get value(){return this.#e()}set value(t){this.#r(t)}onSetup(){st(ve,{add:this.#i.bind(this),remove:this.#a.bind(this)})}onAttach(t){J(B)||_(t,"role","radiogroup"),this.setAttributes({value:this.#e})}onDestroy(){this.#t.clear()}#i(t){this.#t.has(t)||(this.#t.add(t),t.onCheck=this.#n,t.check(t.value()===this.#e()))}#a(t){t.onCheck=null,this.#t.delete(t)}#n=this.#r.bind(this);#r(t,e){const s=d(this.#e);if(!t||t===s)return;const i=this.#o(s),n=this.#o(t);i?.check(!1,e),n?.check(!0,e),this.#e.set(t),this.onValueChange?.(t,e)}#o(t){for(const e of this.#t)if(t===d(e.value))return e;return null}}class Vs extends x{static props={emptyLabel:"Default"};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{audioTracks:t}=this.#e.$state;return t().length<=1}constructor(){super(),this.#s=new Zt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#e=$(),J(B)&&(this.#t=F(B))}onConnect(t){h(this.#i.bind(this)),h(this.#n.bind(this)),h(this.#a.bind(this))}getOptions(){const{audioTracks:t}=this.#e.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}#i(){this.#s.value=this.#r()}#a(){const{emptyLabel:t}=this.$props,{audioTrack:e}=this.#e.$state,s=e();this.#t?.hint.set(s?.label??t())}#n(){this.#t?.disable(this.disabled)}#r(){const{audioTrack:t}=this.#e.$state,e=t();return e?e.label.toLowerCase():""}#o(t,e){if(this.disabled)return;const s=this.#e.audioTracks.toArray().findIndex(i=>i.label.toLowerCase()===t);if(s>=0){const i=this.#e.audioTracks[s];this.#e.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:i,trigger:e})}}}const Te=Vs.prototype;P(Te,"value"),P(Te,"disabled"),V(Te,"getOptions");function te(a,t){Qi(()=>{if(!a.connectScope)return;const e=a.querySelector("template");e&&h(()=>{const s=a.getOptions();Wi(e,s.length,(i,n)=>{const{label:r,value:o}=s[n],l=i.querySelector('[data-part="label"]');i.setAttribute("value",o),l&&(w(r)?l.textContent=r:h(()=>{l.textContent=r()})),t?.(i,s[n],n)})})})}class Pn extends A(HTMLElement,Vs){static tagName="media-audio-radio-group";onConnect(){te(this)}}class Rs extends x{static props={offLabel:"Off"};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{hasCaptions:t}=this.#t.$state;return!t()}constructor(){super(),this.#s=new Zt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=$(),J(B)&&(this.#e=F(B))}onConnect(t){super.onConnect?.(t),h(this.#i.bind(this)),h(this.#n.bind(this)),h(this.#a.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.#t.$state;return[{value:"off",label:t},...e().filter(H).map(s=>({track:s,label:s.label,value:this.#l(s)}))]}#i(){this.#s.value=this.#r()}#a(){const{offLabel:t}=this.$props,{textTrack:e}=this.#t.$state,s=e();this.#e?.hint.set(s&&H(s)&&s.mode==="showing"?s.label:t())}#n(){this.#e?.disable(this.disabled)}#r(){const{textTrack:t}=this.#t.$state,e=t();return e&&H(e)&&e.mode==="showing"?this.#l(e):"off"}#o(t,e){if(this.disabled)return;if(t==="off"){const i=this.#t.textTracks.selected;if(i){const n=this.#t.textTracks.indexOf(i);this.#t.remote.changeTextTrackMode(n,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.#t.textTracks.toArray().findIndex(i=>this.#l(i)===t);if(s>=0){const i=this.#t.textTracks[s];this.#t.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:i,trigger:e})}}#l(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}}const ke=Rs.prototype;P(ke,"value"),P(ke,"disabled"),V(ke,"getOptions");class Sn extends A(HTMLElement,Rs){static tagName="media-captions-radio-group";onConnect(){te(this)}}class Pe extends x{static props={disabled:!1};#t;#e=v(null);get expanded(){return this.#t?.expanded()??!1}constructor(){super(),new yt}onSetup(){this.#t=F(B)}onAttach(t){this.#t.attachMenuButton(this),h(this.#s.bind(this)),_(t,"type","button")}onConnect(t){h(this.#i.bind(this)),this.#a();const e=new MutationObserver(this.#a.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),T(()=>e.disconnect()),gt(t,s=>{this.dispatch("select",{trigger:s})})}#s(){this.#t.disableMenuButton(this.$props.disabled())}#i(){const t=this.#e();t&&h(()=>{const e=this.#t.hint();e&&(t.textContent=e)})}#a(){const t=this.el?.querySelector('[data-part="hint"]');this.#e.set(t??null)}}const xn=Pe.prototype;P(xn,"expanded");class En extends A(HTMLElement,Pe){static tagName="media-menu-button"}class Cn extends Y{#t;constructor(t){super(),this.#t=t,h(this.#e.bind(this))}onDestroy(){this.#a?.(),this.#a=null}#e(){const t=this.#t.trigger();if(!t){this.hide();return}const e=this.show.bind(this),s=this.hide.bind(this);this.#t.listen(t,e,s)}#s=-1;#i=-1;#a=null;show(t){this.#n(),window.cancelAnimationFrame(this.#i),this.#i=-1,this.#a?.(),this.#a=null,this.#s=window.setTimeout(()=>{this.#s=-1;const e=this.#t.content();e&&e.style.removeProperty("display"),d(()=>this.#t.onChange(!0,t))},this.#t.showDelay?.()??0)}hide(t){this.#n(),d(()=>this.#t.onChange(!1,t)),this.#i=requestAnimationFrame(()=>{this.#n(),this.#i=-1;const e=this.#t.content();if(e){const s=()=>{e.style.display="none",this.#a=null};if(zi(e)){this.#a?.();const n=Q(e,"animationend",s,{once:!0});this.#a=n}else s()}})}#n(){window.clearTimeout(this.#s),this.#s=-1}}const Se=dt(),It=dt();function An(a,t){const e=pi(a,t);for(const{el:s,top:i,left:n}of e)s.scroll({top:i,left:n,behavior:t.behavior})}function Mn(a,t={}){An(a,{scrollMode:"if-needed",block:"center",inline:"center",...t})}const Ln=["a[href]","[tabindex]","input","select","button"].map(a=>`${a}:not([aria-hidden='true'])`).join(","),qn=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class _n{#t=-1;#e=null;#s=[];#i;get items(){return this.#s}constructor(t){this.#i=t}attachMenu(t){Q(t,"focus",this.#r.bind(this)),this.#e=t,T(()=>{this.#e=null})}listen(){this.#e&&(this.update(),new I(this.#e).add("keyup",this.#l.bind(this)).add("keydown",this.#u.bind(this)),T(()=>{this.#t=-1,this.#s=[]}))}update(){this.#t=0,this.#s=this.#c()}scroll(t=this.#n()){const e=this.#s[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Mn(e,{behavior:"smooth",boundary:s=>!s.hasAttribute("data-root")})})})}focusActive(t=!0){const e=this.#n();this.#a(e>=0?e:0,t)}#a(t,e=!0){this.#t=t,this.#s[t]?(this.#s[t].focus({preventScroll:!0}),e&&this.scroll(t)):this.#e?.focus({preventScroll:!0})}#n(){return this.#s.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}#r(){this.#t>=0||(this.update(),this.focusActive())}#o(t){const e=t.target;if(mi(t)&&e instanceof Element){const s=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!s}return qn.has(t.key)}#l(t){this.#o(t)&&(t.stopPropagation(),t.preventDefault())}#u(t){if(this.#o(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.#i.closeMenu(t);break;case"Tab":this.#a(this.#d(t.shiftKey?-1:1));break;case"ArrowUp":this.#a(this.#d(-1));break;case"ArrowDown":this.#a(this.#d(1));break;case"Home":case"PageUp":this.#a(0);break;case"End":case"PageDown":this.#a(this.#s.length-1);break}}#d(t){let e=this.#t;do e=(e+t+this.#s.length)%this.#s.length;while(this.#s[e]?.offsetParent===null);return e}#c(){if(!this.#e)return[];const t=this.#e.querySelectorAll(Ln),e=[],s=i=>i.getAttribute("role")==="menu";for(const i of t)Et(i)&&i.offsetParent!==null&&cs(this.#e,i,s)&&e.push(i);return e}}var In=Object.defineProperty,Dn=Object.getOwnPropertyDescriptor,Dt=(a,t,e,s)=>{for(var i=Dn(t,e),n=a.length-1,r;n>=0;n--)(r=a[n])&&(i=r(t,e,i)||i);return i&&In(t,e,i),i};let Vn=0;class Ct extends x{static props={showDelay:0};#t;#e;#s;#i=v(!1);#a=v(!1);#n=v(null);#r=v(null);#o;#l=new Set;#u=null;#d;#c;#h=!1;#p=v(!1);#f=new Set;get triggerElement(){return this.#n()}get contentElement(){return this.#r()}get isSubmenu(){return!!this.#o}constructor(){super();const{showDelay:t}=this.$props;this.#d=new Cn({trigger:this.#n,content:this.#r,showDelay:t,listen:(e,s,i)=>{gt(e,r=>{this.#i()?i(r):s(r)});const n=this.#L();n&&gt(n,r=>{r.stopPropagation(),i(r)})},onChange:this.#$.bind(this)})}onSetup(){this.#t=$();const t=++Vn;this.#e=`media-menu-${t}`,this.#s=`media-menu-button-${t}`,this.#c=new _n({closeMenu:this.close.bind(this)}),J(B)&&(this.#o=F(B)),this.#b(),this.setAttributes({"data-open":this.#i,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#x.bind(this)}),st(B,{button:this.#n,content:this.#r,expanded:this.#i,hint:v(""),submenu:!!this.#o,disable:this.#A.bind(this),attachMenuButton:this.#w.bind(this),attachMenuItems:this.#v.bind(this),attachObserver:this.#T.bind(this),disableMenuButton:this.#k.bind(this),addSubmenu:this.#D.bind(this),onTransitionEvent:e=>{this.#f.add(e),T(()=>{this.#f.delete(e)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){h(this.#g.bind(this)),this.isSubmenu&&this.#o?.addSubmenu(this)}onDestroy(){this.#n.set(null),this.#r.set(null),this.#u=null,this.#f.clear()}#b(){let t=-1,e=J(It)?F(It):null;st(It,{onDragStart:()=>{e?.onDragStart?.(),window.clearTimeout(t),t=-1,this.#h=!0},onDragEnd:()=>{e?.onDragEnd?.(),t=window.setTimeout(()=>{this.#h=!1,t=-1},300)}})}#g(){const t=this.#S();this.isSubmenu||this.#O(),this.#y(t),t&&(h(()=>{const{height:e}=this.#t.$state,s=this.#r();s&&mt(s,"--player-height",e()+"px")}),this.#c.listen(),this.listen("pointerup",this.#M.bind(this)),Q(window,"pointerup",this.#C.bind(this)))}#w(t){const e=t.el,s=this.isSubmenu,i=tt(this.#x.bind(this));_(e,"tabindex",s?"-1":"0"),_(e,"role",s?"menuitem":"button"),m(e,"id",this.#s),m(e,"aria-haspopup","menu"),m(e,"aria-expanded","false"),m(e,"data-root",!this.isSubmenu),m(e,"data-submenu",this.isSubmenu),h(()=>{m(e,"data-open",this.#i()),m(e,"aria-disabled",i())}),this.#n.set(e),T(()=>{this.#n.set(null)})}#v(t){const e=t.el;e.style.setProperty("display","none"),m(e,"id",this.#e),_(e,"role","menu"),_(e,"tabindex","-1"),m(e,"data-root",!this.isSubmenu),m(e,"data-submenu",this.isSubmenu),this.#r.set(e),T(()=>this.#r.set(null)),h(()=>m(e,"data-open",this.#i())),this.#c.attachMenu(e),this.#y(!1);const i=this.#B.bind(this);this.isSubmenu?this.#o?.onTransitionEvent(i):(t.listen("transitionstart",i),t.listen("transitionend",i),t.listen("animationend",this.#O),t.listen("vds-menu-resize",this.#O))}#T(t){this.#u=t}#y(t){const e=d(this.#r);e&&m(e,"aria-hidden",Ht(!t))}#k(t){this.#p.set(t)}#m=!1;#$(t,e){if(this.#m=Nt(e),e?.stopPropagation(),this.#i()===t)return;if(this.#x()){t&&this.#d.hide(e);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const s=this.#n(),i=this.#r();if(s&&(m(s,"aria-controls",t&&this.#e),m(s,"aria-expanded",Ht(t))),i&&m(i,"aria-labelledby",t&&this.#s),this.#i.set(t),this.#q(e),pt(),this.#m){t?i?.focus():s?.focus();for(const n of[this.el,i])n&&n.setAttribute("data-keyboard","")}else for(const n of[this.el,i])n&&n.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)!this.isSubmenu&&this.#t.activeMenu!==this&&(this.#t.activeMenu?.close(e),this.#t.activeMenu=this),this.#u?.onOpen?.(e);else{if(this.isSubmenu)for(const n of this.#l)n.close(e);else this.#t.activeMenu=null;this.#u?.onClose?.(e)}t&&requestAnimationFrame(this.#P.bind(this))}#P(){this.#F||this.#E||(this.#c.update(),requestAnimationFrame(()=>{this.#m?this.#c.focusActive():this.#c.scroll()}))}#S(){return!this.#x()&&this.#i()}#x(){return this.#a()||this.#p()}#A(t){this.#a.set(t)}#M(t){const e=this.#r();this.#h||e&&ls(e,t)||t.stopPropagation()}#C(t){const e=this.#r();this.#h||e&&ls(e,t)||this.close(t)}#L(){const t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&cs(this.el,t,e=>e.getAttribute("role")==="menu")?t:null}#q(t){this.isSubmenu||(this.#i()?this.#t.remote.pauseControls(t):this.#t.remote.resumeControls(t))}#D(t){this.#l.add(t),new I(t).add("open",this.#R).add("close",this.#N),T(this.#_)}#_=this.#V.bind(this);#V(t){this.#l.delete(t)}#E=!1;#R=this.#I.bind(this);#I(t){this.#E=!0;const e=this.#r();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(const s of this.#l)if(s!==t.target)for(const i of[s.el,s.triggerElement])i?.setAttribute("aria-hidden","true");if(e){const s=t.target.el;for(const i of e.children)i.contains(s)?i.setAttribute("data-open",""):i!==s&&i.setAttribute("data-hidden","")}}#N=this.#H.bind(this);#H(t){this.#E=!1;const e=this.#r();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(const s of this.#l)for(const i of[s.el,s.triggerElement])i?.setAttribute("aria-hidden","false");if(e)for(const s of e.children)s.removeAttribute("data-open"),s.removeAttribute("data-hidden")}#O=vt(()=>{const t=d(this.#r);if(!t)return;let e=0,s=getComputedStyle(t),i=[...t.children];for(const n of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(s[n])||0;for(const n of i)if(Et(n)&&n.style.display==="contents")i.push(...n.children);else if(n.nodeType===3)e+=parseFloat(getComputedStyle(n).fontSize);else if(Et(n)){if(!hs(n))continue;const r=getComputedStyle(n);e+=n.offsetHeight+(parseFloat(r.marginTop)||0)+(parseFloat(r.marginBottom)||0)}mt(t,"--menu-height",e+"px")});#F=!1;#B(t){const e=this.#r();e&&t.propertyName==="height"&&(this.#F=t.type==="transitionstart",m(e,"data-transition",this.#F?"height":null),this.#i()&&this.#P());for(const s of this.#f)s(t)}open(t){d(this.#i)||(this.#d.show(t),pt())}close(t){d(this.#i)&&(this.#d.hide(t),pt())}}Dt([P],Ct.prototype,"triggerElement"),Dt([P],Ct.prototype,"contentElement"),Dt([P],Ct.prototype,"isSubmenu"),Dt([V],Ct.prototype,"open"),Dt([V],Ct.prototype,"close");class Rn extends A(HTMLElement,Ct){static tagName="media-menu"}class On extends Pe{}class Fn extends A(HTMLElement,On){static tagName="media-menu-item"}const xe=dt();class Nn extends x{static props={placement:null,offset:0,alignOffset:0};#t;constructor(){super(),new yt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.#t=F(B),this.#t.attachMenuItems(this),J(xe)){const e=F(xe);e&&(st(xe,null),e.attach(t),T(()=>e.attach(null)))}}onConnect(t){h(this.#e.bind(this))}#e(){const{expanded:t}=this.#t;if(!this.el||!t())return;const e=this.$props.placement();if(!e)return;Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:s,alignOffset:i}=this.$props;T(ji(this.el,this.#i(),e,{offsetVarName:"media-menu",xOffset:i(),yOffset:s()})),T(this.#s.bind(this))}#s(){this.el&&(this.el.removeAttribute("style"),this.el.style.display="none")}#i(){return this.#t.button()}}class Hn extends A(HTMLElement,Nn){static tagName="media-menu-items"}function Os(a,t){return[...a].sort(t?Gn:Bn)}function Bn(a,t){return a.height===t.height?(a.bitrate??0)-(t.bitrate??0):a.height-t.height}function Gn(a,t){return t.height===a.height?(t.bitrate??0)-(a.bitrate??0):t.height-a.height}class Fs extends x{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{canSetQuality:t,qualities:e}=this.#t.$state;return!t()||e().length<=1}#i=ft(()=>{const{sort:t}=this.$props,{qualities:e}=this.#t.$state;return Os(e(),t()==="descending")});constructor(){super(),this.#s=new Zt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=$(),J(B)&&(this.#e=F(B))}onConnect(t){h(this.#a.bind(this)),h(this.#r.bind(this)),h(this.#n.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.#i().map(s=>{const i=s.bitrate&&s.bitrate>=0?`${W(s.bitrate/1e6,2)} Mbps`:null;return{quality:s,label:s.height+"p",value:this.#u(s),bitrate:()=>e()?null:i}})]}#a(){this.#s.value=this.#l()}#n(){const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.#t.$state,i=s()?s().height+"p":"";this.#e?.hint.set(e()?t()+(i?` (${i})`:""):i)}#r(){this.#e?.disable(this.disabled)}#o(t,e){if(this.disabled)return;if(t==="auto"){this.#t.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}const{qualities:s}=this.#t.$state,i=d(s).findIndex(n=>this.#u(n)===t);if(i>=0){const n=d(s)[i];this.#t.remote.changeQuality(i,e),this.dispatch("change",{detail:n,trigger:e})}}#l(){const{quality:t,autoQuality:e}=this.#t.$state;if(e())return"auto";const s=t();return s?this.#u(s):"auto"}#u(t){return t.height+"_"+t.bitrate}}const Ee=Fs.prototype;P(Ee,"value"),P(Ee,"disabled"),V(Ee,"getOptions");class Kn extends A(HTMLElement,Fs){static tagName="media-quality-radio-group";onConnect(){te(this,(t,e)=>{const s=e.bitrate,i=t.querySelector('[data-part="bitrate"]');s&&i&&h(()=>{i.textContent=s()||""})})}}class Ns extends x{static props={value:""};#t=v(!1);#e={value:this.$props.value,check:this.#r.bind(this),onCheck:null};get checked(){return this.#t()}constructor(){super(),new yt}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#t,"aria-checked":tt(this.#t)})}onAttach(t){const e=J(B);_(t,"tabindex",e?"-1":"0"),_(t,"role",e?"menuitemradio":"radio"),h(this.#a.bind(this))}onConnect(t){this.#i(),gt(t,this.#n.bind(this)),T(this.#s.bind(this))}#s(){ae(()=>{F(ve).remove(this.#e)},this.connectScope)}#i(){F(ve).add(this.#e)}#a(){const{value:t}=this.$props,e=t();d(this.#t)&&this.#e.onCheck?.(e)}#n(t){d(this.#t)||(this.#o(!0,t),this.#l(t),this.#e.onCheck?.(d(this.$props.value),t))}#r(t,e){d(this.#t)!==t&&this.#o(t,e)}#o(t,e){this.#t.set(t),this.dispatch("change",{detail:t,trigger:e})}#l(t){this.dispatch("select",{trigger:t})}}const Un=Ns.prototype;P(Un,"checked");class Qn extends A(HTMLElement,Ns){static tagName="media-radio"}const Wn=[.25,.5,.75,1,1.25,1.5,1.75,2];class Hs extends x{static props={normalLabel:"Normal",rates:Wn};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.#t.$state;return!e()||t().length===0}constructor(){super(),this.#s=new Zt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=$(),J(B)&&(this.#e=F(B))}onConnect(t){h(this.#i.bind(this)),h(this.#a.bind(this)),h(this.#n.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1?e:s+"\xD7",value:s.toString()}))}#i(){this.#s.value=this.#r()}#a(){const{normalLabel:t}=this.$props,{playbackRate:e}=this.#t.$state,s=e();this.#e?.hint.set(s===1?t():s+"\xD7")}#n(){this.#e?.disable(this.disabled)}#r(){const{playbackRate:t}=this.#t.$state;return t().toString()}#o(t,e){if(this.disabled)return;const s=+t;this.#t.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}}const Ce=Hs.prototype;P(Ce,"value"),P(Ce,"disabled"),V(Ce,"getOptions");class jn extends A(HTMLElement,Hs){static tagName="media-speed-radio-group";onConnect(){te(this)}}class zn extends x{static props={src:null,alt:null,crossOrigin:null};static state=new St({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#t;onSetup(){this.#t=$(),this.#o(),this.#l(),this.#u(),this.#i()}onAttach(t){t.style.setProperty("pointer-events","none"),h(this.#n.bind(this)),h(this.#o.bind(this)),h(this.#l.bind(this)),h(this.#u.bind(this)),h(this.#i.bind(this));const{started:e}=this.#t.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.#a.bind(this),"data-error":this.#e.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){h(this.#s.bind(this)),h(this.#d.bind(this))}#e(){const{error:t}=this.$state;return!xt(t())}#s(){const{canLoadPoster:t,poster:e}=this.#t.$state;!t()&&e()&&qt(e(),"preconnect")}#i(){const{src:t}=this.$props,{poster:e,nativeControls:s}=this.#t.$state;this.el&&m(this.el,"display",s()?"none":null),this.$state.hidden.set(this.#e()||!(t()||e())||s())}#a(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}#n(){const t=this.$state.img();t&&(new I(t).add("load",this.#c.bind(this)).add("error",this.#h.bind(this)),t.complete&&this.#c())}#r="";#o(){const{poster:t}=this.#t.$props,{canLoadPoster:e,providedPoster:s,inferredPoster:i}=this.#t.$state,n=this.$props.src()||"",r=n||t()||i();this.#r===s()&&s.set(n),this.$state.src.set(e()&&r.length?r:null),this.#r=n}#l(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:s}=this.#t.$state;e.set(t()||s()?this.$props.alt():null)}#u(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s,poster:i}=this.#t.$state,n=t()!==null?t():s();e.set(/ytimg\.com|vimeo/.test(i()||"")?null:n===!0?"anonymous":n)}#d(){const{loading:t,error:e}=this.$state,{canLoadPoster:s,poster:i}=this.#t.$state;t.set(s()&&!!i()),e.set(null)}#c(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}#h(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}}class Yn extends A(HTMLElement,zn){static tagName="media-poster";static attrs={crossOrigin:"crossorigin"};#t=document.createElement("img");onSetup(){this.$state.img.set(this.#t)}onConnect(){const{src:t,alt:e,crossOrigin:s}=this.$state;h(()=>{const{loading:i,hidden:n}=this.$state;this.#t.style.display=i()||n()?"none":""}),h(()=>{m(this.#t,"alt",e()),m(this.#t,"crossorigin",s()),m(this.#t,"src",t())}),this.#t.parentNode!==this&&this.prepend(this.#t)}}const Ae=new St({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Bs(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Bs(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Bs(a,t,e){const s=t-a,i=e-a;return s>0?i/s:0}class Gs extends Y{#t;#e;constructor(t){super(),this.#t=t}onConnect(t){this.#e=new IntersectionObserver(e=>{this.#t.callback?.(e,this.#e)},this.#t),this.#e.observe(t),T(this.#s.bind(this))}#s(){this.#e?.disconnect(),this.#e=void 0}}function Xn(a,t,e,s){return he(a,W(e,Li(s)),t)}function Jn(a,t,e,s){const i=he(0,e,1),n=t-a,r=n*i,o=r/s,l=s*Math.round(o);return a+l}const Me={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class Zn extends Y{#t;#e;#s;constructor(t,e){super(),this.#t=t,this.#e=e}onSetup(){J(It)&&(this.#s=F(It))}onConnect(t){h(this.#u.bind(this,t)),h(this.#d.bind(this,t)),this.#t.swipeGesture&&h(this.#i.bind(this))}#i(){const{pointer:t}=this.#e.$state;if(t()!=="coarse"||!this.#t.swipeGesture()){this.#a=null;return}this.#a=this.#e.player.el?.querySelector("media-provider,[data-media-provider]"),this.#a&&new I(this.#a).add("touchstart",this.#o.bind(this),{passive:!0}).add("touchmove",this.#l.bind(this),{passive:!1})}#a=null;#n=null;#r=null;#o(t){this.#n=t.touches[0]}#l(t){if(xt(this.#n)||ds(t))return;const e=t.touches[0],s=e.clientX-this.#n.clientX,i=e.clientY-this.#n.clientY,n=this.$state.dragging();!n&&Math.abs(i)>5||n||(t.preventDefault(),Math.abs(s)>20&&(this.#n=e,this.#r=this.$state.value(),this.#T(this.#r,t)))}#u(t){const{hidden:e}=this.$props;Q(t,"focus",this.#c.bind(this)),!(e()||this.#t.isDisabled())&&new I(t).add("keyup",this.#P.bind(this)).add("keydown",this.#$.bind(this)).add("pointerenter",this.#b.bind(this)).add("pointermove",this.#g.bind(this)).add("pointerleave",this.#w.bind(this)).add("pointerdown",this.#v.bind(this))}#d(t){this.#t.isDisabled()||!this.$state.dragging()||new I(document).add("pointerup",this.#A.bind(this),{capture:!0}).add("pointermove",this.#C.bind(this)).add("touchmove",this.#M.bind(this),{passive:!1})}#c(){this.#p(this.$state.value())}#h(t,e){const{value:s,min:i,max:n,dragging:r}=this.$state,o=Math.max(i(),Math.min(t,n()));s.set(o);const l=this.createEvent("value-change",{detail:o,trigger:e});if(this.dispatch(l),this.#t.onValueChange?.(l),r()){const u=this.createEvent("drag-value-change",{detail:o,trigger:e});this.dispatch(u),this.#t.onDragValueChange?.(u)}}#p(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.#h(t,e)}#f(t){let e,s=this.el.getBoundingClientRect(),{min:i,max:n}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:r,height:o}=s;e=(r-t.clientY)/o}else if(this.#n&&ot(this.#r)){const{width:r}=this.#a.getBoundingClientRect(),o=(t.clientX-this.#n.clientX)/r,l=n()-i(),u=l*Math.abs(o);e=(o<0?this.#r-u:this.#r+u)/l}else{const{left:r,width:o}=s;e=(t.clientX-r)/o}return Math.max(i(),Math.min(n(),this.#t.roundValue(Jn(i(),n(),e,this.#t.getStep()))))}#b(t){this.$state.pointing.set(!0)}#g(t){const{dragging:e}=this.$state;e()||this.#p(this.#f(t),t)}#w(t){this.$state.pointing.set(!1)}#v(t){if(t.button!==0)return;const e=this.#f(t);this.#T(e,t),this.#p(e,t)}#T(t,e){const{dragging:s}=this.$state;if(s())return;s.set(!0),this.#e.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),this.#t.onDragStart?.(i),this.#s?.onDragStart?.()}#y(t,e){const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.#e.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),this.#t.onDragEnd?.(i),this.#n=null,this.#r=null,this.#s?.onDragEnd?.()}#k;#m=!1;#$(t){if(!Object.keys(Me).includes(t.key))return;const{key:s}=t,i=this.#S(t);if(!xt(i)){this.#p(i,t),this.#h(i,t);return}const n=this.#x(t);this.#m||(this.#m=s===this.#k,!this.$state.dragging()&&this.#m&&this.#T(n,t)),this.#p(n,t),this.#k=s}#P(t){if(!Object.keys(Me).includes(t.key)||!xt(this.#S(t)))return;const s=this.#m?this.$state.pointerValue():this.#x(t);this.#h(s,t),this.#y(s,t),this.#k="",this.#m=!1}#S(t){let e=t.key,{min:s,max:i}=this.$state;return e==="Home"||e==="PageUp"?s():e==="End"||e==="PageDown"?i():!t.metaKey&&/^[0-9]$/.test(e)?(i()-s())/10*Number(e):null}#x(t){const{key:e,shiftKey:s}=t;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:i}=this.$props,{min:n,max:r,value:o,pointerValue:l}=this.$state,u=this.#t.getStep(),c=this.#t.getKeyStep(),p=s?c*i():c,f=Number(Me[e]),g=p*f,y=this.#m?l():this.#t.getValue?.()??o(),D=(y+g)/u;return Math.max(n(),Math.min(r(),Number((u*D).toFixed(3))))}#A(t){if(t.button!==0)return;t.preventDefault(),t.stopImmediatePropagation();const e=this.#f(t);this.#p(e,t),this.#y(e,t)}#M(t){t.preventDefault()}#C=Lt(t=>{this.#p(this.#f(t),t)},20,{leading:!0})}const Vt=dt(()=>({}));class At extends Y{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#t;#e;#s=v(!0);#i=v(!0);constructor(t){super(),this.#e=t}onSetup(){this.#t=$();const t=new yt;t.attach(this),this.$state.focused=t.focused.bind(t),J(Vt)||st(Vt,{default:"value"}),st(Se,{orientation:this.$props.orientation,disabled:this.#e.isDisabled,preview:v(null)}),h(this.#r.bind(this)),h(this.#o.bind(this)),h(this.#l.bind(this)),this.#d(),new Zn(this.#e,this.#t).attach(this),new Gs({callback:this.#a.bind(this)}).attach(this)}onAttach(t){_(t,"role","slider"),_(t,"tabindex","0"),_(t,"autocomplete","off"),h(this.#c.bind(this))}onConnect(t){T(us(t,this.#s.set)),h(this.#n.bind(this))}#a(t){this.#i.set(t[0].isIntersecting)}#n(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#s()||!this.#i.bind(this))}#r(){const{dragging:t,value:e,min:s,max:i}=this.$state;d(t)||e.set(Xn(s(),i(),e(),this.#e.getStep()))}#o(){this.$state.step.set(this.#e.getStep())}#l(){if(!this.#e.isDisabled())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}#u(){return Ht(this.#e.isDisabled())}#d(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#e.aria.valueMin??this.$state.min,"aria-valuemax":this.#e.aria.valueMax??this.$state.max,"aria-valuenow":this.#e.aria.valueNow,"aria-valuetext":this.#e.aria.valueText,"aria-orientation":t})}#c(){const{fillPercent:t,pointerPercent:e}=this.$state;this.#h(W(t(),3),W(e(),3))}#h=vt((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})}class Le extends x{static props={...At.props,min:0,max:100,value:0};static state=Ae;constructor(){super(),new At({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#t.bind(this),valueText:this.#e.bind(this)}})}onSetup(){h(this.#s.bind(this)),h(this.#i.bind(this))}#t(){const{value:t}=this.$state;return Math.round(t())}#e(){const{value:t,max:e}=this.$state;return W(t()/e()*100,2)+"%"}#s(){const{value:t}=this.$props;this.$state.value.set(t())}#i(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}class tr extends x{static props={offset:0,noClamp:!1};#t;onSetup(){this.#t=F(Se);const{active:t}=ne(Le.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{preview:e}=this.#t;e.set(t),T(()=>e.set(null)),h(this.#e.bind(this));const s=new ResizeObserver(this.#e.bind(this));s.observe(t),T(()=>s.disconnect())}#e=vt(()=>{const{disabled:t,orientation:e}=this.#t;if(t())return;const s=this.el,{offset:i,noClamp:n}=this.$props;s&&er(s,{clamp:!n(),offset:i(),orientation:e()})})}function er(a,{clamp:t,offset:e,orientation:s}){const i=getComputedStyle(a),n=parseFloat(i.width),r=parseFloat(i.height),o={top:null,right:null,bottom:null,left:null};if(o[s==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,s==="horizontal"){const l=n/2;if(!t)o.left=`calc(var(--slider-pointer) - ${l}px)`;else{const u=`max(0px, calc(var(--slider-pointer) - ${l}px))`,c=`calc(100% - ${n}px)`;o.left=`min(${u}, ${c})`}}else{const l=r/2;if(!t)o.bottom=`calc(var(--slider-pointer) - ${l}px)`;else{const u=`max(${l}px, calc(var(--slider-pointer) - ${l}px))`,c=`calc(100% - ${r}px)`;o.bottom=`min(${u}, ${c})`}}Object.assign(a.style,o)}class sr extends A(HTMLElement,tr){static tagName="media-slider-preview"}const ht=new Map,ee=new Map;class Ve{#t;#e;#s;$images=v([]);static create(t,e){const s=$();return new Ve(t,e,s)}constructor(t,e,s){this.#e=t,this.#s=e,this.#t=s,h(this.#i.bind(this))}#i(){const{canLoad:t}=this.#t.$state;if(!t())return;const e=this.#e();if(e){if(w(e)&&ht.has(e)){const s=ht.get(e);if(ht.delete(e),ht.set(e,s),ht.size>99){const i=ht.keys().next().value;ht.delete(i)}this.$images.set(ht.get(e))}else if(w(e)){const s=this.#s(),i=e+"::"+s;if(!ee.has(i)){const n=new Promise(async(r,o)=>{try{const l=await fetch(e,{credentials:Ut(s)});if(l.headers.get("content-type")==="application/json"){const c=await l.json();if(X(c))if(c[0]&&"text"in c[0])r(this.#r(c));else{for(let p=0;p<c.length;p++){const f=c[p];lt(fi(f),!1),lt("url"in f&&w(f.url),!1),lt("startTime"in f&&ot(f.startTime),!1)}r(c)}else r(this.#n(c));return}import("../captions/prod.js").then(async({parseResponse:c})=>{try{const{cues:p}=await c(l);r(this.#r(p))}catch(p){o(p)}})}catch(l){o(l)}}).then(r=>(ht.set(i,r),r)).catch(r=>{this.#d(e,r)}).finally(()=>{w(i)&&ee.delete(i)});ee.set(i,n)}ee.get(i)?.then(n=>{this.$images.set(n||[])})}else if(X(e))try{this.$images.set(this.#a(e))}catch(s){this.#d(e,s)}else try{this.$images.set(this.#n(e))}catch(s){this.#d(e,s)}return()=>{this.$images.set([])}}}#a(t){const e=this.#o();return t.map((s,i)=>(lt(s.url&&w(s.url)),lt("startTime"in s&&ot(s.startTime)),{...s,url:w(s.url)?this.#l(s.url,e):s.url}))}#n(t){lt(w(t.url)),lt(X(t.tiles)&&t.tiles?.length);const e=new URL(t.url),s=[],i="tile_width"in t?t.tile_width:t.tileWidth,n="tile_height"in t?t.tile_height:t.tileHeight;for(const r of t.tiles)s.push({url:e,startTime:"start"in r?r.start:r.startTime,width:i,height:n,coords:{x:r.x,y:r.y}});return s}#r(t){for(let i=0;i<t.length;i++){const n=t[i];lt("startTime"in n&&ot(n.startTime)),lt("text"in n&&w(n.text))}const e=[],s=this.#o();for(const i of t){const[n,r]=i.text.split("#"),o=this.#u(r);e.push({url:this.#l(n,s),startTime:i.startTime,endTime:i.endTime,width:o?.w,height:o?.h,coords:o&&ot(o.x)&&ot(o.y)?{x:o.x,y:o.y}:void 0})}return e}#o(){let t=d(this.#e);return!w(t)||!/^https?:/.test(t)?location.href:t}#l(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}#u(t){if(!t)return{};const[e,s]=t.split("="),i=s?.split(","),n={};if(!e||!i)return null;for(let r=0;r<e.length;r++){const o=+i[r];isNaN(o)||(n[e[r]]=o)}return n}#d(t,e){}}class ir extends x{static props={src:null,time:0,crossOrigin:null};static state=new St({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#t;#e=[];onSetup(){this.media=$(),this.#t=Ve.create(this.$props.src,this.$state.crossOrigin),this.#i(),this.setAttributes({"data-loading":this.#o.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":tt(this.$state.hidden)})}onConnect(t){h(this.#s.bind(this)),h(this.#u.bind(this)),h(this.#i.bind(this)),h(this.#a.bind(this)),h(this.#d.bind(this)),h(this.#c.bind(this))}#s(){const t=this.$state.img();t&&new I(t).add("load",this.#n.bind(this)).add("error",this.#r.bind(this))}#i(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.media.$state,i=t()!==null?t():s();e.set(i===!0?"anonymous":i)}#a(){const{src:t,loading:e,error:s}=this.$state;return t()&&(e.set(!0),s.set(null)),()=>{this.#p(),e.set(!1),s.set(null)}}#n(){const{loading:t,error:e}=this.$state;this.#c(),t.set(!1),e.set(null)}#r(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}#o(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}#l(){const{error:t}=this.$state;return!xt(t())}#u(){const{hidden:t}=this.$state,{duration:e}=this.media.$state,s=this.#t.$images();t.set(this.#l()||!Number.isFinite(e())||s.length===0)}getTime(){return this.$props.time()}#d(){let t=this.#t.$images();if(!t.length)return;let e=this.getTime(),{src:s,activeThumbnail:i}=this.$state,n=-1,r=null;for(let o=t.length-1;o>=0;o--){const l=t[o];if(e>=l.startTime&&(!l.endTime||e<l.endTime)){n=o;break}}t[n]&&(r=t[n]),i.set(r),s.set(r?.url.href||"")}#c(){if(!this.scope||this.$state.hidden())return;const t=this.el,e=this.$state.img(),s=this.$state.activeThumbnail();if(!e||!s||!t)return;let i=s.width??e.naturalWidth,n=s?.height??e.naturalHeight,{maxWidth:r,maxHeight:o,minWidth:l,minHeight:u,width:c,height:p}=getComputedStyle(this.el);l==="100%"&&(l=parseFloat(c)+""),u==="100%"&&(u=parseFloat(p)+"");let f=Math.max(parseInt(l)/i,parseInt(u)/n),g=Math.min(Math.max(parseInt(l),parseInt(r))/i,Math.max(parseInt(u),parseInt(o))/n),y=!isNaN(g)&&g<1?g:f>1?f:1;this.#h(t,"--thumbnail-width",`${i*y}px`),this.#h(t,"--thumbnail-height",`${n*y}px`),this.#h(t,"--thumbnail-aspect-ratio",String(W(i/n,5))),this.#h(e,"width",`${e.naturalWidth*y}px`),this.#h(e,"height",`${e.naturalHeight*y}px`),this.#h(e,"transform",s.coords?`translate(-${s.coords.x*y}px, -${s.coords.y*y}px)`:""),this.#h(e,"max-width","none")}#h(t,e,s){t.style.setProperty(e,s),this.#e.push(()=>t.style.removeProperty(e))}#p(){for(const t of this.#e)t();this.#e=[]}}const ar=ps('<img loading="eager" decoding="async" aria-hidden="true">');class Ks extends A(HTMLElement,ir){static tagName="media-thumbnail";static attrs={crossOrigin:"crossorigin"};#t;#e=this.#s();onSetup(){this.#t=$(),this.$state.img.set(this.#e)}onConnect(){const{src:t,crossOrigin:e}=this.$state;this.#e.parentNode!==this&&this.prepend(this.#e),h(()=>{m(this.#e,"src",t()),m(this.#e,"crossorigin",e())})}#s(){return ms(ar)}}class nr extends Ks{static tagName="media-slider-thumbnail";#t;#e;onSetup(){super.onSetup(),this.#t=$(),this.#e=ne(Le.state)}onConnect(){super.onConnect(),h(this.#s.bind(this))}#s(){const{duration:t,clipStartTime:e}=this.#t.$state;this.time=e()+this.#e.pointerRate()*t()}}function qe(a,t){const e=String(a),s=e.length;if(s<t){const n=t-s;return`${"0".repeat(n)}${a}`}return e}function Us(a){const t=Math.trunc(a/3600),e=Math.trunc(a%3600/60),s=Math.trunc(a%60),i=Number((a-Math.trunc(a)).toPrecision(3));return{hours:t,minutes:e,seconds:s,fraction:i}}function _e(a,{padHrs:t=null,padMins:e=null,showHrs:s=!1,showMs:i=!1}={}){const{hours:n,minutes:r,seconds:o,fraction:l}=Us(a),u=t?qe(n,2):n,c=e||xt(e)&&a>=3600?qe(r,2):r,p=qe(o,2),f=i&&l>0?`.${String(l).replace(/^0?\./,"")}`:"",g=`${c}:${p}${f}`;return n>0||s?`${u}:${g}`:g}function Qs(a){const t=[],{hours:e,minutes:s,seconds:i}=Us(a);return e>0&&t.push(`${e} hour`),s>0&&t.push(`${s} min`),(i>0||t.length===0)&&t.push(`${i} sec`),t.join(" ")}class Ws extends x{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#t;#e;#s;onSetup(){this.#s=ne(Le.state),this.#t=F(Vt),this.#e=ft(this.getValueText.bind(this))}getValueText(){const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:n,showHours:r,showMs:o}=this.$props,{value:l,pointerValue:u,min:c,max:p}=this.#s,f=e?.()??this.#t.default,g=t()==="current"?l():u();if(f==="percent"){const y=p()-c(),D=g/y*100;return(this.#t.percent??W)(D,s())+"%"}else return f==="time"?(this.#t.time??_e)(g,{padHrs:i(),padMins:n(),showHrs:r(),showMs:o()}):(this.#t.value?.(g)??g.toFixed(2))+""}}const rr=Ws.prototype;V(rr,"getValueText");class or extends A(HTMLElement,Ws){static tagName="media-slider-value";static attrs={padMinutes:{converter:gi}};onConnect(){h(()=>{this.textContent=this.getValueText()})}}class lr extends x{static props={...At.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=Ae;#t;#e;#s=v(null);constructor(){super();const{noSwipeGesture:t}=this.$props;new At({swipeGesture:()=>!t(),getValue:this.#b.bind(this),getStep:this.#g.bind(this),getKeyStep:this.#w.bind(this),roundValue:this.#v,isDisabled:this.#T.bind(this),aria:{valueNow:this.#y.bind(this),valueText:this.#k.bind(this)},onDragStart:this.#c.bind(this),onDragValueChange:this.#h.bind(this),onDragEnd:this.#p.bind(this),onValueChange:this.#f.bind(this)})}onSetup(){this.#t=$(),st(Vt,{default:"time",value:this.#P.bind(this),time:this.#S.bind(this)}),this.setAttributes({"data-chapters":this.#a.bind(this)}),this.setStyles({"--slider-progress":this.#i.bind(this)}),h(this.#r.bind(this)),h(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),_(t,"aria-label","Seek")}onConnect(t){h(this.#o.bind(this)),Ci(this.#t.textTracks,"chapters",this.#s.set)}#i(){const{bufferedEnd:t,duration:e}=this.#t.$state;return W(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}#a(){const{duration:t}=this.#t.$state;return this.#s()?.cues.length&&Number.isFinite(t())&&t()>0}#n(){this.#e=Lt(this.#l.bind(this),this.$props.seekingRequestThrottle())}#r(){if(this.$state.hidden())return;const{value:t,dragging:e}=this.$state,s=this.#b();d(e)||(t.set(s),this.dispatch("value-change",{detail:s}))}#o(){const t=this.#t.player.el,{preview:e}=F(Se);t&&e()&&m(t,"data-preview",this.$state.active())}#l(t,e){this.#t.remote.seeking(t,e)}#u(t,e,s){this.#e.cancel();const{live:i}=this.#t.$state;if(i()&&e>=99){this.#t.remote.seekToLiveEdge(s);return}this.#t.remote.seek(t,s)}#d=!1;#c(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:s}=this.#t.$state;this.#d=!s(),this.#t.remote.pause(t)}}#h(t){this.#e(this.#m(t.detail),t)}#p(t){const{seeking:e}=this.#t.$state;d(e)||this.#l(this.#m(t.detail),t);const s=t.detail;this.#u(this.#m(s),s,t);const{pauseWhileDragging:i}=this.$props;i()&&this.#d&&(this.#t.remote.play(t),this.#d=!1)}#f(t){const{dragging:e}=this.$state;e()||!t.trigger||this.#p(t)}#b(){const{currentTime:t}=this.#t.$state;return this.#$(t())}#g(){const t=this.$props.step()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#w(){const t=this.$props.keyStep()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#v(t){return W(t,3)}#T(){const{disabled:t}=this.$props,{canSeek:e}=this.#t.$state;return t()||!e()}#y(){const{value:t}=this.$state;return Math.round(t())}#k(){const t=this.#m(this.$state.value()),{duration:e}=this.#t.$state;return Number.isFinite(t)?`${Qs(t)} out of ${Qs(e())}`:"live"}#m(t){const{duration:e}=this.#t.$state;return W(t/100*e(),5)}#$(t){const{liveEdge:e,duration:s}=this.#t.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?i*100:100}#P(t){const e=this.#m(t),{live:s,duration:i}=this.#t.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}#S(t,e){const s=this.#m(t),{live:i,duration:n}=this.#t.$state,r=i()?s-n():s;return Number.isFinite(s)?`${r<0?"-":""}${_e(Math.abs(r),e)}`:"LIVE"}}class hr extends A(HTMLElement,lr){static tagName="media-time-slider"}class ur extends x{static props={...At.props,keyStep:5,shiftKeyMultiplier:2};static state=Ae;#t;onSetup(){this.#t=$();const{audioGain:t}=this.#t.$state;st(Vt,{default:"percent",value(e){return(e*(t()??1)).toFixed(2)},percent(e){return Math.round(e*(t()??1))}}),new At({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#a.bind(this),aria:{valueMax:this.#i.bind(this),valueNow:this.#e.bind(this),valueText:this.#s.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),h(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),_(t,"aria-label","Volume");const{canSetVolume:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":tt(()=>!e())})}#e(){const{value:t}=this.$state,{audioGain:e}=this.#t.$state;return Math.round(t()*(e()??1))}#s(){const{value:t,max:e}=this.$state,{audioGain:s}=this.#t.$state;return W(t()/e()*(s()??1)*100,2)+"%"}#i(){const{audioGain:t}=this.#t.$state;return this.$state.max()*(t()??1)}#a(){const{disabled:t}=this.$props,{canSetVolume:e}=this.#t.$state;return t()||!e()}#n(){const{muted:t,volume:e}=this.#t.$state,s=t()?0:e()*100;this.$state.value.set(s),this.dispatch("value-change",{detail:s})}#r=Lt(this.#o.bind(this),25);#o(t){if(!t.trigger)return;const e=W(t.detail/100,3);this.#t.remote.changeVolume(e,t)}#l(t){this.#r(t)}#u(t){this.#r(t)}}class cr extends A(HTMLElement,ur){static tagName="media-volume-slider"}class dr extends x{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new St({timeText:"",hidden:!1});#t;#e=v(null);#s=v(!0);#i=v(!0);onSetup(){this.#t=$(),this.#o();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.#d.bind(this)}),new Gs({callback:this.#a.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||h(this.#l.bind(this)),h(this.#o.bind(this))}onConnect(t){T(us(t,this.#s.set)),h(this.#n.bind(this)),h(this.#r.bind(this))}#a(t){this.#i.set(t[0].isIntersecting)}#n(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#s()||!this.#i())}#r(){if(!this.$props.toggle()){this.#e.set(null);return}this.el&&gt(this.el,this.#c.bind(this))}#o(){const{hidden:t,timeText:e}=this.$state,{duration:s}=this.#t.$state;if(t())return;const{type:i,padHours:n,padMinutes:r,showHours:o}=this.$props,l=this.#u(i()),u=s(),c=this.#d();if(!Number.isFinite(l+u)){e.set("LIVE");return}const p=c?Math.max(0,u-l):l,f=_e(p,{padHrs:n(),padMins:r(),showHrs:o()});e.set((c?"-":"")+f)}#l(){if(!this.el)return;const{toggle:t}=this.$props;m(this.el,"role",t()?"timer":null),m(this.el,"tabindex",t()?0:null)}#u(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.#t.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}#d(){return this.$props.remainder()&&this.#e()!==!1}#c(t){if(t.preventDefault(),this.#e()===null){this.#e.set(!this.$props.remainder());return}this.#e.set(e=>!e)}}class pr extends A(HTMLElement,dr){static tagName="media-time";onConnect(){h(()=>{this.textContent=this.$state.timeText()})}}E(kn),E(Yn),E(Ca),E(Pa),E(ba),E(xa),E($a),E(Ma),E(ga),E(Ta),E(cr),E(hr),E(sr),E(nr),E(or),E(Rn),E(En),E(Hn),E(Fn),E(Pn),E(Sn),E(jn),E(Kn),E(Qn),E(pr),E(Ks);let Rt=null,it=Wt.record,mr=["playing","paused","ended","currentTime","seeking","duration","volume","muted","loop","poster"],js={ratechange:"rate-change",ready:"can-play",timeupdate:"time-update",volumechange:"volume-change"},fr=["airplay","captions-off","captions-on","download","enter-fullscreen","exit-fullscreen","fast-forward","muted","pause","pip","play","restart","rewind","settings","volume"];class ie{constructor(t,e={}){if(this.target=t,this.config=e,w(t)?t=document.querySelector(t):Et(t)||(t=t[0]),!Et(t))throw Error(`[plyr] target must be of type \`HTMLElement\`, found \`${typeof t}\``);const s=t.getAttribute("data-plyr-config");if(s)try{e={...e,...JSON.parse(s)}}catch{}const{enabled:i=!0,debug:n="error",autoPause:r=!0,ratio:o=null,hideControls:l=!0,resetOnEnd:u=!1,disableContextMenu:c=!0,iconUrl:p=null,iconPrefix:f="plyr",keyboard:g={focused:!0,global:!1},i18n:y=null,tracks:D,...R}=e;if(this.player=document.createElement("media-player"),this.provider=document.createElement("media-provider"),this.layout=document.createElement("media-plyr-layout"),!i)return;for(const q of mr)Object.defineProperty(this,q,{get:()=>this.player[q],set:K=>void(this.player[q]=K)});if(w(n)?this.player.logLevel=n:n&&(this.player.logLevel="warn"),r&&this.#s.add(Q(this.player,"play",this.#i.bind(this))),this.ratio=o,this.layout.translations=y,l||(this.player.controls.canIdle=!1),u&&this.#s.add(Q(this.player,"ended",this.#a.bind(this))),p){this.layout.customIcons=!0;const q=`sprite-${f}`,K=document.getElementById(q),bt=()=>{for(const U of fr){const G="http://www.w3.org/2000/svg",rt=document.createElementNS(G,"svg");m(rt,"fill","none"),m(rt,"slot",`${U}-icon`),m(rt,"aria-hidden","true"),m(rt,"viewBox","0 0 18 18");const wt=document.createElementNS(G,"use");wt.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${f}-${U}`),rt.append(wt),this.layout.append(rt)}};K?bt():fetch(p).then(U=>U.text()).then(U=>{const G=document.createElement("div");m(G,"id",q),m(G,"hidden",""),G.innerHTML=U,document.body.insertAdjacentElement("afterbegin",G),bt()}).catch(U=>{this.layout.customIcons=!1})}g.global?this.player.keyTarget="document":g.focused?this.player.keyTarget="player":this.player.keyDisabled=!0,t.removeAttribute("controls");const z=t.getAttribute("title");z&&this.player.setAttribute("title",z);const ut=t.getAttribute("width"),at=t.getAttribute("height");(ut||at)&&(ut&&(this.player.style.width=ut),at&&(this.player.style.height=at),this.player.style.aspectRatio="unset");for(const q of t.attributes){const K=q.name.replace("data-",""),bt=yi(K);bt in this.player?this.player.setAttribute(K,q.value):bt in this.layout&&this.layout.setAttribute(K,q.value)}for(const[q,K]of Object.entries(R))q in this.player?this.player[q]=K:q in this.layout&&(this.layout[q]=K);if(D)for(const q of D)this.player.textTracks.add(q);if(this.player.append(this.provider,this.layout),!Xe(t)&&!Je(t)&&!Ii(t))t.append(this.player);else{for(const q of[...t.children])this.provider.append(q);t.replaceWith(this.player)}const nt=t.getAttribute("data-plyr-provider"),ct=t.getAttribute("data-plyr-embed-id");nt&&/youtube|vimeo/.test(nt)&&ct&&(this.player.src=`${nt}/${ct}`)}static setup(t,e){return w(t)&&(t=document.querySelectorAll(t)),[...t].map(s=>new ie(s,e))}static supported(t,e){return!0}player;provider;layout;fullscreen=new zs(this);playing=it.playing;paused=it.paused;ended=it.ended;currentTime=it.currentTime;seeking=it.seeking;duration=it.duration;volume=it.volume;muted=it.muted;loop=it.loop;poster=it.poster;get type(){return this.player.provider?.type??""}get isHTML5(){return/audio|video|hls/.test(this.type)}get isEmbed(){return/youtube|vimeo/.test(this.type)}get buffered(){const{bufferedEnd:t,seekableEnd:e}=this.player.state;return e>0?t/e:0}get stopped(){return this.paused&&this.currentTime===0}get hasAudio(){if(!this.isHTML5)return!0;const t=this.player.provider.media;return!!(t.mozHasAudio||t.webkitAudioDecodedByteCount||t.audioTracks?.length||this.player.audioTracks.length)}get speed(){return this.player.playbackRate}set speed(t){this.player.remoteControl.changePlaybackRate(t)}get currentTrack(){return this.player.textTracks.selectedIndex}set currentTrack(t){this.player.remoteControl.changeTextTrackMode(t,"showing")}get pip(){return this.player.state.pictureInPicture}set pip(t){t?this.player.enterPictureInPicture():this.player.exitPictureInPicture()}get quality(){return this.player.state.quality?.height??null}set quality(t){let e=this.player.qualities,s=-1;if(t!==null){let i=1/0;for(let n=0;n<e.length;n++){const r=Math.abs(e[n].height-t);r<i&&(s=n,i=r)}}this.player.remoteControl.changeQuality(s)}#t=null;get source(){return this.#t}set source(t){const{type:e="video",sources:s="",title:i="",poster:n="",thumbnails:r="",tracks:o=[]}=t??{};this.player.src=s,this.player.viewType=e,this.player.title=i,this.player.poster=n,this.layout.thumbnails=r,this.player.textTracks.clear();for(const l of o)this.player.textTracks.add(l);this.#t=t}#e=null;get ratio(){return this.#e}set ratio(t){t&&(t=t.replace(/\s*:\s*/," / ")),mt(this.player,"aspect-ratio",t??"unset"),this.#e=t}get download(){return this.layout.download}set download(t){this.layout.download=t}#s=Be();#i(){Rt!==this&&Rt?.pause(),Rt=this}#a(){this.currentTime=0,this.paused=!0}play(){return this.player.play()}pause(){return this.player.pause()}togglePlay(t=this.paused){return t?this.player.play():this.player.pause()}toggleCaptions(t=!this.player.textTracks.selected){const e=this.player.remoteControl;t?e.showCaptions():e.disableCaptions()}toggleControls(t=!this.player.controls.showing){const e=this.player.controls;t?e.show():e.hide()}restart(){this.currentTime=0}stop(){this.pause(),this.player.currentTime=0}forward(t=this.config.seekTime??10){this.currentTime+=t}rewind(t=this.config.seekTime??10){this.currentTime-=t}increaseVolume(t=5){this.volume+=t}decreaseVolume(t=5){this.volume-=t}airplay(){return this.player.requestAirPlay()}on(t,e){this.#r(t,e)}once(t,e){this.#r(t,e,{once:!0})}off(t,e){this.#r(t,e,{remove:!0})}#n=[];#r(t,e,s={}){let i=t,n=null;switch(t){case"captionsenabled":case"captionsdisabled":i="text-track-change",n=t==="captionsenabled";break;case"controlsshown":case"controlshidden":i="controls-change",n=t==="controlsshown";break;case"enterfullscreen":case"exitfullscreen":i="fullscreen-change",n=t==="enterfullscreen";break}const r=js[i]??i,o=l=>{if(!(bi(n)&&!!l.detail!==n)){if(r!==t){e(new O(t,{...l,trigger:l}));return}e(l)}};if(s.remove){let l=-1;do if(l=this.#n.findIndex(u=>u.type===t&&u.callback===e),l>=0){const{listener:u}=this.#n[l];this.player.removeEventListener(r,u),this.#n.splice(l,1)}while(l>=0)}else this.#n.push({type:t,callback:e,listener:o}),this.player.addEventListener(r,o,{once:s.once})}supports(t){return!!t&&je(null,t)}destroy(){for(const{type:t,listener:e}of this.#n)this.player.removeEventListener(js[t]??t,e);this.#t=null,this.#n.length=0,Rt===this&&(Rt=null),this.#s.empty(),this.player.destroy()}}class zs{#t;constructor(t){this.#t=t}get#e(){return this.#t.player}get enabled(){return this.#e.state.canFullscreen}get active(){return this.#e.state.fullscreen}enter(){return this.#e.requestFullscreen()}exit(){return this.#e.exitFullscreen()}toggle(){return this.active?this.exit():this.enter()}}window.Plyr=ie;class gr{constructor(t,e){this.loader=t,this.config=e}priority=1;#t=null;#e=null;#s=/(ssa|ass)$/;canRender(t,e){return!!e&&!!t.src&&(w(t.type)&&this.#s.test(t.type)||this.#s.test(t.src))}attach(t){t&&this.loader().then(async e=>{this.#t=new e.default({...this.config,video:t,subUrl:this.#e?.src||""}),new I(this.#t).add("ready",()=>{const s=this.#t?._canvas;s&&(s.style.pointerEvents="none")}).add("error",s=>{this.#e&&(this.#e[N.readyState]=3,this.#e.dispatchEvent(new O("error",{trigger:s,detail:s.error})))})})}changeTrack(t){!t||t.readyState===3?this.#i():this.#e!==t&&(this.#t?.setTrackByUrl(t.src),this.#e=t)}detach(){this.#i()}#i(){this.#t?.freeTrack(),this.#e=null}}export{As as A,ys as L,ws as M,ie as P,vs as T,as as V,ps as a,Ze as b,ms as c,fs as d,Wt as e,pe as f,$s as g,gr as h,jt as i,Ts as j,Os as k,zs as l,ce as m,de as s};
