@page "/tests/signaturepad"

<Row>
      <Column ColumnSize="ColumnSize.Is12">
        <Card Margin="Margin.Is4.FromTop">
               <CardHeader>
                 <CardTitle>Settings</CardTitle>
               </CardHeader>
               <CardBody>
         <Field Horizontal>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">BackgroundColor</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
                <ColorPicker @bind-Color="@backgroundColor"/>
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">PenColor</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
                <ColorPicker @bind-Color="@penColor" />
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">DotSize</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
               <NumericPicker @bind-Value="@dotSize" />
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">MinWidth</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
               <NumericPicker @bind-Value="@minWidth" />
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">MaxWidth</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
               <NumericPicker @bind-Value="@maxWidth" />
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">Throttle</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
               <NumericPicker @bind-Value="@throttle" />
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">MinDistance</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
               <NumericPicker @bind-Value="@minDistance" />
            </FieldBody>
            <FieldLabel ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">VelocityFilterWeight</FieldLabel>
            <FieldBody ColumnSize="ColumnSize.IsFull.OnTablet.Is2.OnDesktop">
               <NumericPicker @bind-Value="@velocityFilterWeight" />
            </FieldBody>
         </Field>
         </CardBody>
       </Card>
     </Column>
</Row>

<Row>
    <Column>
        <Card Margin="Margin.Is4.OnY">
            <CardHeader>
                <CardTitle>Signature pad</CardTitle>
            </CardHeader>
            <CardBody>
                <SignaturePad @bind-Value="@data" BackgroundColor="@backgroundColor" PenColor="@penColor" DotSize="@dotSize" MinWidth="@minWidth" MaxWidth="@maxWidth" Throttle="@throttle" MinDistance="@minDistance" VelocityFilterWeight="@velocityFilterWeight"></SignaturePad>
            </CardBody>
        </Card>
    </Column>

    <Column>
        <Card Margin="Margin.Is4.OnY">
            <CardHeader>
                <CardTitle>Image</CardTitle>
            </CardHeader>
            <CardBody>
                <Image Source="@Image64" />
            </CardBody>
        </Card>
    </Column>
</Row>



@code {
    byte[] data = null;

    string Image64 => data != null
    ? $"data:image/png;base64,{Convert.ToBase64String( data )}"
    : null;

    string backgroundColor = "rgba(158, 121, 121, 1)";
    string penColor = "#ff0000";
    double dotSize = 0.7;
    double minWidth = 0.5;
    double maxWidth = 1;
    double velocityFilterWeight = 0.7;
    int throttle = 10;
    int minDistance = 5;
}