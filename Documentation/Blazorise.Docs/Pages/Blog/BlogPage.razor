@page "/blog/{Slug}"
@using Blazorise.Docs.BlogRuntime
@inject Blazorise.Docs.BlogRuntime.IBlogProvider BlogProvider

@code {
    [Parameter] public string Slug { get; set; } = string.Empty;

    BlogPageModel pageModel;

    bool loading = true;

    protected override async Task OnParametersSetAsync()
    {
        loading = true;
        pageModel = await BlogProvider.GetBySlugAsync( Slug );
        loading = false;
    }
}

@if ( loading )
{
    <Div>
        <Skeleton Animation="SkeletonAnimation.Pulse">
            <SkeletonItem ColumnSize="ColumnSize.Is7" />
            <SkeletonItem ColumnSize="ColumnSize.Is4" />
            <SkeletonItem ColumnSize="ColumnSize.Is4" />
            <SkeletonItem ColumnSize="ColumnSize.Is6" />
            <SkeletonItem ColumnSize="ColumnSize.Is8" />
            <SkeletonItem ColumnSize="ColumnSize.Is7" />
            <SkeletonItem ColumnSize="ColumnSize.Is4" />
            <SkeletonItem ColumnSize="ColumnSize.Is4" />
            <SkeletonItem ColumnSize="ColumnSize.Is6" />
            <SkeletonItem ColumnSize="ColumnSize.Is8" />
        </Skeleton>
    </Div>
}
else if ( pageModel is null )
{
    <Alert Color="Color.Danger" Visible>
        <AlertMessage>
            Post not found.
        </AlertMessage>
    </Alert>
}
else
{
    <Div>
        <Heading Size="HeadingSize.Is1" Margin="Margin.Is1.FromBottom">
            @pageModel.Title
        </Heading>
        <Div TextColor="TextColor.Muted" Margin="Margin.Is3.FromBottom">
            @pageModel.PostedOn
            @if ( !string.IsNullOrWhiteSpace( pageModel.ReadTime ) )
            {
                <Span Margin="Margin.Is2.FromStart">· @pageModel.ReadTime</Span>
            }
        </Div>

        @pageModel.Content
    </Div>
}