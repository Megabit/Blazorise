<Autocomplete TItem="Country"
              TValue="string"
              Data="@Countries"
              TextField="@(( item ) => item.Name)"
              ValueField="@(( item ) => item.Iso)"
              SelectedValues="SelectedValues"
              SelectedValuesChanged="OnSelectedValuesChanged"
              @bind-SelectedTexts="SelectedTexts"
              Placeholder="Search..."
              FreeTyping
              SelectionMode="AutocompleteSelectionMode.Checkbox">
    <NotFoundTemplate> Sorry... @context was not found! :( </NotFoundTemplate>
</Autocomplete>

@code {
    [Inject]
    public CountryData CountryData { get; set; }
    public IEnumerable<Country> Countries;

    protected override async Task OnInitializedAsync()
    {
        Countries = await CountryData.GetDataAsync();
        await base.OnInitializedAsync();
    }

    Task OnSelectedValuesChanged( List<string> newValues )
    {
        SelectedValues = newValues;
        return SelectedValuesChanged.InvokeAsync( SelectedValues );
    }

    [Parameter]
    public List<string> SelectedValues { get; set; }

    [Parameter]
    public EventCallback<List<string>> SelectedValuesChanged { get; set; }

    [Parameter]
    public List<string> SelectedTexts { get; set; }
}